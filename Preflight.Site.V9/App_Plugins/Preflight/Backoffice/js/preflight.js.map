{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Preflight/Backoffice/app.js","src/Preflight/Backoffice/components/_componentsModule.js","src/Preflight/Backoffice/components/card/card.component.js","src/Preflight/Backoffice/components/progresscircle/progresscircle.component.js","src/Preflight/Backoffice/components/resultintro.component.js","src/Preflight/Backoffice/components/stateicon/stateicon.component.js","src/Preflight/Backoffice/constants.js","src/Preflight/Backoffice/controllers/_controllersModule.js","src/Preflight/Backoffice/controllers/notification.controller.js","src/Preflight/Backoffice/controllers/preflight.controller.js","src/Preflight/Backoffice/controllers/settings.controller.js","src/Preflight/Backoffice/interceptors/preflight.save.interceptor.js","src/Preflight/Backoffice/plugins/_pluginsModule.js","src/Preflight/Backoffice/plugins/linkhealth/linkhealth.result.component.js","src/Preflight/Backoffice/plugins/readability/readability.plugin.controller.js","src/Preflight/Backoffice/resources/_servicesModule.js","src/Preflight/Backoffice/resources/preflight.hub.js","src/Preflight/Backoffice/resources/preflight.service.js"],"names":[],"mappings":"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","file":"preflight.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","﻿import { ServicesModule } from './resources/_servicesModule';\r\nimport { ComponentsModule } from './components/_componentsModule';\r\nimport { ControllersModule } from './controllers/_controllersModule';\r\nimport { PluginsModule } from './plugins/_pluginsModule';\r\n\r\nconst name = 'preflight';\r\n\r\nangular.module(name, [\r\n    ServicesModule,\r\n    ComponentsModule,\r\n    ControllersModule,\r\n    PluginsModule,\r\n]);\r\n\r\nangular.module('umbraco').requires.push(name);","﻿import { CardComponent } from './card/card.component';\r\nimport { ProgressCircleComponent } from './progresscircle/progresscircle.component';\r\nimport { ResultIntroComponent } from './resultintro.component';\r\nimport { StateIconComponent } from './stateicon/stateicon.component';\r\n\r\nexport const ComponentsModule = angular\r\n    .module('preflight.components', [])\r\n    .component(CardComponent.name, CardComponent)\r\n    .component(ResultIntroComponent.name, ResultIntroComponent)\r\n    .component(StateIconComponent.name, StateIconComponent)\r\n    .component(ProgressCircleComponent.name, ProgressCircleComponent)\r\n    .name;","﻿class Card {\r\n\r\n    static template = `\r\n        <div class=\"card {{ ::$ctrl.cardClass }}\">\r\n            <span class=\"card-score {{ ::$ctrl.cardScoreClass }}\" ng-bind=\"::$ctrl.score\"></span>\r\n            <span class=\"card-title\">\r\n                {{ ::$ctrl.title }}<br />\r\n                {{ ::$ctrl.subtitle }}\r\n            </span>\r\n        </div>`;\r\n\r\n    cardClass = 'pass';\r\n    cardScoreClass = 'pass-color';\r\n\r\n    localizationService;\r\n\r\n    constructor(localizationService) {\r\n        this.localizationService = localizationService;\r\n    }\r\n\r\n    $onInit() {\r\n        if (this.failed) {\r\n            this.cardClass = 'fail';\r\n            this.cardScoreClass = 'fail-color';\r\n        }\r\n\r\n        if (this.title[0] === '@') {\r\n            this.localizationService.localize(this.title, this.tokens)\r\n                .then(localizedTitle => this.title = localizedTitle); \r\n        }\r\n\r\n        if (this.subtitle[0] === '@') {\r\n            this.localizationService.localize(this.subtitle, this.tokens)\r\n                .then(localizedSubtitle => this.subtitle = localizedSubtitle);\r\n        }\r\n    };\r\n}\r\n\r\nexport const CardComponent = {\r\n    transclude: true, \r\n    name: 'preflightCard',\r\n    bindings: {\r\n        title: '@?',\r\n        subtitle: '@?',\r\n        failed: '<',\r\n        score: '<',\r\n        tokens: '<'\r\n    },\r\n    template: Card.template,\r\n    controller: Card\r\n};\r\n","﻿class ProgressCircle {\n\n    static template = `\n        <div class=\"umb-progress-circle preflight-progress-circle\" ng-style=\"{'width': $ctrl.size, 'height': $ctrl.size }\">\n            <svg class=\"umb-progress-circle__view-box\" viewBox=\"0 0 33.83098862 33.83098862\"> \n                <circle class=\"umb-progress-circle__highlight--{{ $ctrl.background }}\" cx=\"16.91549431\" cy=\"16.91549431\" r=\"15.91549431\" fill=\"none\" stroke-width=\".5\"></circle>\n                <circle class=\"umb-progress-circle__highlight umb-progress-circle__highlight--{{ $ctrl.foreground }}\"\n                    cx=\"16.91549431\" cy=\"16.91549431\" r=\"15.91549431\" stroke-linecap=\"round\" fill=\"none\" stroke-width=\"2\" stroke-dasharray=\"{{ $ctrl.dashArray }}\"></circle>\n            </svg> \n            <div ng-style=\"{'font-size': $ctrl.percentageSize}\" class=\"umb-progress-circle__percentage\">\n                {{ $ctrl.label }}\n                <small>pass rate</small>                \n            </div>\n        </div>`;\n\n    r;\n    $element;\n\n    constructor($element) {\n        this.r = $element.find('.umb-progress-circle__highlight').attr('r');\r\n    }\n\n    $onChanges = () => {\n        this.draw();\r\n    }\n\n    draw = () => {\n        let percent = Math.round(this.percentage);\n        percent = percent > 100 ? 100 : percent || 0;\n\n        // calculating the circle's highlight\n        const pathLength = this.r * Math.PI * 2 * percent / 100;\n\n        // Full circle length\n        this.dashArray = `${pathLength},100`;\n\n        // set font size\n        this.percentageSize = this.size * 0.3 + 'px';\n\n        // use rounded percentage\n        this.label = `${percent}%`;\r\n    }\n}\n\nexport const ProgressCircleComponent = {\r\n    transclude: true,\r\n    name: 'progressCircle',\r\n    bindings: {\r\n        size: '@?',\n        percentage: '<',\n        done: '@',\n        foreground: '@',\n        background: '@'\r\n    },\r\n    template: ProgressCircle.template,\r\n    controller: ProgressCircle\r\n};\r\n","﻿class ResultIntro {\r\n    /**\r\n     * Directive used to render the heading for a plugin in the results view\r\n     * Send a stringified array as the tokens attribute to replace %0%, %1% .. %n% in the localized string\r\n     */\r\n\r\n    static template = `\r\n        <h5 ng-bind=\"::$ctrl.heading\" class=\"mt0\"></h5>\r\n        <span ng-if=\"$ctrl.pass\" ng-bind=\"::$ctrl.passText\"></span>`;\r\n\r\n    localizationService;\r\n\r\n    constructor(localizationService) {\r\n        this.localizationService = localizationService;\r\n    }\r\n\r\n    $onInit() {\r\n        if (this.passText[0] === '@') {\r\n            this.localizationService.localize(this.passText, this.tokens)\r\n                .then(localizedPassText => this.passText = localizedPassText);\r\n        }\r\n\r\n        if (this.heading[0] === '@') {\r\n            this.localizationService.localize(this.heading, this.tokens)\r\n                .then(localizedHeading => this.heading = localizedHeading);\r\n        }\r\n    };\r\n}\r\n\r\nexport const ResultIntroComponent = {\r\n    transclude: true,\r\n    name: 'preflightResultIntro',\r\n    bindings: {\r\n        tokens: '<',\r\n        passText: '@?',\r\n        heading: '@?',\r\n        pass: '<'\r\n    },\r\n    template: ResultIntro.template,\r\n    controller: ResultIntro\r\n};","﻿class StateIcon {\r\n\r\n    static template = `\r\n        <div class=\"state-icon {{ ::$ctrl.className }}\">\r\n            <umb-icon icon=\"icon-{{ ::$ctrl.icon }}\"></umb-icon>\r\n        </div>`;\r\n\r\n    icon = 'power';\r\n    className = 'disabled';\r\n\r\n    $onInit() {\r\n        if (!this.disabled) {\r\n            this.icon = this.failed ? 'delete' : 'check';\r\n            this.className = this.failed ? 'fail' : 'pass';\r\n        }\r\n    };\r\n}\r\n\r\nexport const StateIconComponent = {\r\n    transclude: true,\r\n    name: 'preflightStateIcon',\r\n    bindings: {\r\n        failed: '<',\r\n        disabled: '<'\r\n    },\r\n    template: StateIcon.template,\r\n    controller: StateIcon,\r\n};\r\n","﻿export const constants = {\r\n    checkboxlist: 'checkboxlist',\r\n    multipletextbox: 'multipletextbox',\r\n}","﻿import { PreflightController } from './preflight.controller';\r\nimport { NotificationController } from './notification.controller';\r\nimport { SettingsController } from './settings.controller';\r\n\r\nexport const ControllersModule = angular\r\n    .module('preflight.controllers', [])\r\n    .controller(PreflightController.controllerName, PreflightController)\r\n    .controller(NotificationController.controllerName, NotificationController)\r\n    .controller(SettingsController.controllerName, SettingsController)\r\n    .name;","﻿export class NotificationController {\r\n\r\n    static controllerName = 'preflight.notification.controller';\r\n\r\n    saveCancelled;\r\n\r\n    constructor() {\r\n\r\n    }\r\n}\r\n","﻿export class PreflightController {\r\n\r\n    static controllerName = 'preflight.controller';\r\n\r\n    $scope;\r\n    $rootScope;\r\n    $element;\r\n    $timeout;\r\n    editorState;\r\n    preflightService;\r\n    preflightHub;\r\n\r\n    dirtyHashes = {};\r\n    validPropTypes;\r\n    propsBeingChecked = [];\r\n    propertiesToTrack = [];\r\n    dirtyProps = [];\r\n\r\n    results = {\r\n        properties: []\r\n    };\r\n\r\n    jsonProperties = [\r\n        'Umbraco.Grid',\r\n        'Umbraco.NestedContent',\r\n    ];\r\n\r\n    blockListEditorAlias = 'Umbraco.BlockList';\r\n\r\n    noTests = false;\r\n    percentageDone = 20;\r\n    progressStep = 0;\r\n    activeVariant;\r\n\r\n    constructor($scope, $rootScope, $element, $timeout, editorState, preflightService, preflightHub) {\r\n        this.$scope = $scope;\r\n        this.$rootScope = $rootScope;\r\n        this.$element = $element;\r\n        this.$timeout = $timeout;\r\n        this.editorState = editorState;\r\n        this.preflightService = preflightService;\r\n        this.preflightHub = preflightHub;\r\n\r\n        this.validPropTypes = Umbraco.Sys.ServerVariables.Preflight.PropertyTypesToCheck;\r\n\r\n        this.$scope.model.badge = {\r\n            type: 'info'\r\n        };\r\n\r\n        $rootScope.$on('app.tabChange', (e, data) => {\r\n            if (data.alias === 'preflight') {\r\n                // collapse open nc controls, timeouts prevent $apply errors\r\n                for (let openNc of document.querySelectorAll('.umb-nested-content__item--active .umb-nested-content__header-bar')) {\r\n                    $timeout(() => openNc.click());\r\n                }\r\n\r\n                $timeout(() => {\r\n                    this.checkDirty();\r\n                    this.setBadgeCount();\r\n                });\r\n            }\r\n        });\r\n\r\n        $rootScope.$on('showPreflight', (event, data) => {\r\n            if (data.nodeId === $scope.content.id) {\r\n                // needs to find app closest to current scope\r\n                const appLink = $element.closest('form').find('[data-element=\"sub-view-preflight\"]');\r\n\r\n                if (appLink) {\r\n                    appLink.click();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {any} arr\r\n     */\r\n    joinList = arr => {\r\n        let outStr;\r\n        if (arr.length === 1) {\r\n            outStr = arr[0];\r\n        } else if (arr.length === 2) {\r\n            outStr = arr.join(' and ');\r\n        } else if (arr.length > 2) {\r\n            outStr = arr.slice(0, -1).join(', ') + ', and ' + arr.slice(-1);\r\n        }\r\n\r\n        return outStr;\r\n    };\r\n\r\n\r\n    /**\r\n     * Convert a string to a hash for storage and comparison.\r\n     * @param {string} s - the string to hashify\r\n     * @returns {int} the generated hash\r\n     */\r\n    getHash = s => s ? s.split('').reduce((a, b) => {\r\n        a = (a << 5) - a + b.charCodeAt(0);\r\n        return a & a;\r\n    }, 0) : 1;\r\n\r\n\r\n    /**\r\n     * Get property by alias from the current variant\r\n     * @param {any} alias\r\n     */\r\n    getProperty = alias => {\r\n        for (let tab of this.editorState.current.variants.find(x => x.active).tabs) {\r\n            for (let prop of tab.properties) {\r\n                if (prop.alias === alias) {\r\n                    return prop;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {any} editor\r\n     */\r\n    onComplete = () => {\r\n        // it's possible no tests ran, in which case results won't exist\r\n        this.noTests = this.results.properties.every(x => !x.plugins.length);\r\n        if (this.noTests) {\r\n            this.$scope.model.badge = undefined;\r\n        }\r\n\r\n        for (let p of this.results.properties) {\r\n            p.disabled = p.failedCount === -1;\r\n        }\r\n\r\n        this.showSuccessMessage = !this.results.failed && !this.noTests;\r\n        this.done = true;\r\n    }; \r\n\r\n\r\n    /**\r\n     * Updates the badge in the header with the number of failed tests\r\n     */\r\n    setBadgeCount = pending => {\r\n        if (pending) {\r\n            this.$scope.model.badge = {\r\n                type: 'warning'\r\n            };\r\n            return;\r\n        }\r\n\r\n        if (this.results && this.results.failedCount > 0) {\r\n            this.$scope.model.badge = {\r\n                count: this.results.failedCount,\r\n                type: 'alert --error-badge pf-block'\r\n            };\r\n        } else {\r\n            this.$scope.model.badge = {\r\n                type: 'success icon-'\r\n            };\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * if node is invariant, send no culture, otherwise get from language.name on the active variant\r\n     * */\r\n    getCurrentCulture = () => this.activeVariant.language ? this.activeVariant.language.culture : '';\r\n\r\n\r\n    /**\r\n     * Updates the property set with the new value, and removes any temporary property from that set\r\n     * @param {object} data - a response model item returned via the signalr hub\r\n     */\r\n    rebindResult = data => {\r\n        console.log(data.label, data);\r\n        let newProp = true;\r\n        let totalTestsRun = 0;\r\n        let existingProp = this.results.properties.find(x => x.label === data.label);\r\n\r\n        if (existingProp) {\r\n            existingProp = Object.assign(existingProp, data);\r\n            existingProp.loading = false;\r\n            newProp = false;\r\n        }\r\n\r\n        // a new property will have a temporary placeholder - remove it\r\n        // _temp ensures grid with multiple editors only removes the correct temp entry\r\n        if (newProp && !data.remove && data.failedCount !== -1) {\r\n            const tempIndex = this.results.properties.findIndex(p => p.name === `${data.name}_temp`);\r\n            if (tempIndex !== -1) {\r\n                this.results.properties.splice(tempIndex, 1);\r\n            }\r\n            this.results.properties.push(data);\r\n        }\r\n\r\n        this.results.properties = this.results.properties.filter(x => x.remove === false);\r\n        this.results.properties = this.results.properties.filter(x => x.failedCount > -1);\r\n\r\n        this.results.failedCount = this.results.properties.reduce((prev, cur) => {\r\n            totalTestsRun += cur.totalTests;\r\n            return prev + cur.failedCount;\r\n        }, 0);\r\n\r\n        this.results.failed = this.results.failedCount > 0;\r\n        this.propsBeingCheckedStr = this.joinList(this.propsBeingChecked.splice(this.propsBeingChecked.indexOf(data.name), 1));\r\n        this.percentageFailed = (totalTestsRun - this.results.failedCount) / totalTestsRun * 100;\r\n    };\r\n\r\n\r\n    /**\r\n     * Finds dirty content properties, checks the type and builds a collection of simple models for posting to the preflight checkdirty endpoint\r\n     * Also generates and stores a hash of the property value for comparison on subsequent calls, to prevent re-fetching unchanged data\r\n     */\r\n    checkDirty = () => {\r\n\r\n        this.dirtyProps = [];\r\n        this.hasDirty = false;\r\n\r\n        for (let prop of this.propertiesToTrack) {\r\n            let currentValue = this.getProperty(prop.alias).value;\r\n\r\n            if (prop.editor === this.blockListEditorAlias) {\r\n                currentValue = JSON.stringify(currentValue.contentData);\r\n            } else {\r\n                currentValue = this.jsonProperties.includes(prop.editor) ? JSON.stringify(currentValue) : currentValue;\r\n            }\r\n\r\n            const hash = this.getHash(currentValue);\r\n\r\n            if (this.dirtyHashes[prop.label] && this.dirtyHashes[prop.label] !== hash) {\r\n\r\n                this.dirtyProps.push({\r\n                    name: prop.label,\r\n                    value: currentValue,\r\n                    editor: prop.editor\r\n                });\r\n\r\n                this.dirtyHashes[prop.label] = hash;\r\n                this.hasDirty = true;\r\n            } else if (!this.dirtyHashes[prop.label]) {\r\n                this.dirtyHashes[prop.label] = hash;\r\n            }\r\n        }\r\n\r\n        // if dirty properties exist, create a simple model for each and send the lot off for checking\r\n        // response comes via the signalr hub so is not handled here\r\n        if (this.hasDirty) {\r\n            this.$timeout(() => {\r\n\r\n                this.dirtyProps.forEach(prop => {\r\n                    for (let existing of this.results.properties.filter(p => p.name === prop.name)) {\r\n                        if (existing) {\r\n                            existing.open = false;\r\n                            existing.failedCount = -1;\r\n                        } else {\r\n                            // generate new placeholder for pending results - this is removed when the response is returned\r\n                            this.results.properties.push({\r\n                                label: prop.name,\r\n                                open: false,\r\n                                failed: false,\r\n                                failedCount: -1,\r\n                                name: `${prop.name}_temp`\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    this.propsBeingChecked.push(prop.name);\r\n                });\r\n\r\n                this.propsBeingCheckedStr = this.joinList(this.propsBeingChecked);\r\n\r\n                const payload = {\r\n                    properties: this.dirtyProps,\r\n                    culture: this.getCurrentCulture(),\r\n                    id: this.editorState.current.id\r\n                };\r\n\r\n                this.setBadgeCount(true);\r\n                this.done = false;\r\n\r\n                this.preflightService.checkDirty(payload);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Initiates the signalr hub for returning test results\r\n     */\r\n    initSignalR = () => {\r\n\r\n        this.preflightHub.initHub(hub => {\r\n\r\n            hub.on('preflightTest',\r\n                e => {\r\n                    this.rebindResult(e);\r\n                    this.setBadgeCount();\r\n                });\r\n\r\n            hub.on('preflightComplete',\r\n                () => this.onComplete()\r\n            );\r\n\r\n            hub.start(() => {\r\n                /**\r\n                 * Check all properties when the controller loads. Won't re-run when changing between apps\r\n                 * but needs to happen after the hub loads\r\n                 */\r\n                this.$timeout(() => {\r\n                    this.setBadgeCount(true);\r\n                    this.checkDirty(); // builds initial hash array, but won't run anything                    \r\n                    this.preflightService.check(this.editorState.current.id, this.getCurrentCulture());\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    $onInit() {\r\n        this.activeVariant = this.editorState.current.variants.find(x => x.active);\r\n        this.propertiesToTrack = [];\r\n\r\n        if (this.activeVariant) {\r\n            this.activeVariant.tabs.forEach(x => {\r\n                this.propertiesToTrack = this.propertiesToTrack.concat(x.properties.map(x => {\r\n                    if (this.validPropTypes.includes(x.editor)) {\r\n                        return {\r\n                            editor: x.editor,\r\n                            alias: x.alias,\r\n                            label: x.label\r\n                        };\r\n                    }\r\n                })).filter(x => x);\r\n            });\r\n\r\n            // array will have length, as app is only sent on types with testable properties\r\n            if (this.propertiesToTrack.length) {\r\n                this.initSignalR();\r\n            }\r\n        }\r\n    }\r\n}\r\n","﻿import { constants } from '../constants';\r\n\r\nexport class SettingsController {\r\n\r\n    static controllerName = 'preflight.settings.controller';\r\n\r\n    $scope;\r\n    $q;\r\n    languageResource;\r\n    notificationsService;\r\n    preflightService;\r\n\r\n    languages = [];\r\n    tabs = [];\r\n    settings = [];\r\n    currentLanguage;\r\n\r\n    languageChangeWatcher;\r\n    testablePropertiesWatcher;\r\n\r\n    constructor($scope, $q, notificationsService, languageResource, preflightService) {\r\n        this.$scope = $scope;\r\n        this.$q = $q;\r\n        this.notificationsService = notificationsService;\r\n        this.preflightService = preflightService;\r\n        this.languageResource = languageResource;\r\n\r\n        this.languageChangeWatcher = $scope.$watch(() => this.currentLanguage, (newLang, oldLang) => {\r\n            // update settings to only include the current variant\r\n            if (newLang && newLang !== oldLang) {\r\n                this.settings.forEach(s => {\r\n                    const syncSetting = this.settingsSyncModel.find(x => x.alias === s.alias);\r\n\r\n                    // manage old language by updating the sync settings model,\r\n                    // ensuring the value is an object\r\n                    if (oldLang) {\r\n                        if (!syncSetting.value) {\r\n                            syncSetting.value = {};\r\n                        }\r\n                        syncSetting.value[oldLang] = s.value;\r\n                    }\r\n\r\n                    // get the value for the new language and update the settings model\r\n                    if (syncSetting.value && syncSetting.value[newLang]) {\r\n                        s.value = syncSetting.value[newLang];\r\n                    } else {\r\n                        // set the value to a sensible default - array if type is checkboxlist\r\n                        s.value = s.view.includes(constants.checkboxlist) || s.view.includes(constants.multipletextbox) ? [] : null;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    watchTestableProperties = () => {\r\n        this.testablePropertiesWatcher = this.$scope.$watch(() => this.settings.find(x => x.alias === 'propertiesToTest').value, newVal => {\r\n            if (newVal) {\r\n                let propertiesToModify = this.settings.filter(x => x.alias.includes('PropertiesToTest') && x.alias !== 'propertiesToTest');\r\n\r\n                for (let prop of propertiesToModify) {\r\n                    // use the prop alias to find the checkbox set\r\n                    for (let checkbox of document.querySelectorAll(`umb-checkbox[name*=\"${prop.alias}\"]`)) {\r\n                        checkbox.querySelector('.umb-form-check').classList[newVal.indexOf(checkbox.getAttribute('value')) === -1 ? 'add' : 'remove']('pf-disabled');\r\n                    }\r\n                }\r\n            }\r\n        }, true);\r\n    };\r\n\r\n    $onDestroy() {\r\n        this.languageChangeWatcher();\r\n        this.testablePropertiesWatcher();\r\n    }\r\n\r\n    $onInit() {\r\n        const promises = [\r\n            this.preflightService.getSettings(),\r\n            this.languageResource.getAll(),\r\n        ];\r\n\r\n        this.$q.all(promises)\r\n            .then(resp => {\r\n                this.settingsSyncModel = resp[0].data.settings;\r\n                this.settings = JSON.parse(JSON.stringify(this.settingsSyncModel));\r\n\r\n                this.tabs = resp[0].data.tabs;\r\n\r\n                this.languages = resp[1];\r\n                const currentLanguage = this.languages.find(x => x.isDefault).culture;\r\n\r\n                this.settingsSyncModel.forEach(v => {\r\n                    if (v.view.includes(constants.multipletextbox) && v.value) {\r\n                        for (let [key, value] of Object.entries(v.value)) {\r\n                            v.value[key] = value.split(',').map(val => ({ value: val })).sort((a, b) => a < b);\r\n                        }\r\n                    } else if (v.view.includes(constants.checkboxlist) && v.value) {\r\n                        for (let [key, value] of Object.entries(v.value)) {\r\n                            v.value[key] = value.split(',');\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.settings.forEach(v => {\r\n                    const syncSetting = this.settingsSyncModel.find(x => x.alias === v.alias);\r\n                    v.value = syncSetting.value ? syncSetting.value[currentLanguage] : null;\r\n\r\n                    if (v.view.includes('slider')) {\r\n                        v.config = {\r\n                            handle: 'round',\r\n                            initVal1: v.alias === 'longWordSyllables' ? 5 : 65,\r\n                            maxVal: v.alias === 'longWordSyllables' ? 10 : 100,\r\n                            minVal: 0,\r\n                            orientation: 'horizontal',\r\n                            step: 1,\r\n                            tooltip: 'always',\r\n                            tooltipPosition: 'bottom',\r\n                        };\r\n                    } else if (v.view.includes(constants.multipletextbox)) {\r\n                        v.config = {\r\n                            min: 0,\r\n                            max: 0\r\n                        };\r\n                        v.validation = {};\r\n                    } else if (v.view.includes(constants.checkboxlist)) {\r\n                        v.config = {\r\n                            items: v.prevalues\r\n                        };\r\n                    }\r\n                });\r\n\r\n                this.currentLanguage = currentLanguage;\r\n                this.watchTestableProperties();\r\n            });\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    saveSettings = () => {\r\n\r\n        // ensure the current language is correctly mapped to the sync model\r\n        this.settings.forEach(s => {\r\n            const syncSetting = this.settingsSyncModel.find(x => x.alias === s.alias);\r\n\r\n            if (!syncSetting.value) {\r\n                syncSetting.value = {};\r\n            }\r\n\r\n            syncSetting.value[this.currentLanguage] = s.value ? s.value :\r\n                s.view.includes(constants.checkboxlist) || s.view.includes(constants.multipletextbox) ? [] : null;            \r\n        });\r\n\r\n        // ensure readability is valid\r\n        let validRange = true;\r\n        this.languages.forEach(l => {\r\n            const culture = l.culture;\r\n\r\n            const min = parseInt(this.settingsSyncModel.find(x => x.alias === 'readabilityTargetMinimum').value[culture]);\r\n            const max = parseInt(this.settingsSyncModel.find(x => x.alias === 'readabilityTargetMaximum').value[culture]);\r\n\r\n            if (min > max) {\r\n                this.notificationsService.error('ERROR',\r\n                    `Unable to save settings - readability minimum cannot be greater than readability maximum (${l.name})`);\r\n                validRange = false;\r\n            } else if (min + 10 > max) {\r\n                this.notificationsService.warning('WARNING', `Readability range is narrow (${l.name})`);\r\n            }\r\n        });\r\n\r\n        if (validRange) {\r\n            // need to transform multitextbox values without digest\r\n            // so must be a new object, not a reference\r\n            const settingsToSave = JSON.parse(JSON.stringify(this.settingsSyncModel));\r\n\r\n            settingsToSave.forEach(v => {\r\n                if (v.view.includes(constants.multipletextbox)) {\r\n                    for (let [key, value] of Object.entries(v.value)) {\r\n                        v.value[key] = value.map(o => o.value).join(',');\r\n                    }\r\n                } else if (v.view.includes(constants.checkboxlist)) {\r\n                    for (let [key, value] of Object.entries(v.value)) {\r\n                        v.value[key] = value.join(',');\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.preflightService.saveSettings(settingsToSave, this.tabs)\r\n                .then(resp => {\r\n                    resp.data\r\n                        ? this.notificationsService.success('SUCCESS', 'Settings updated')\r\n                        : this.notificationsService.error('ERROR', 'Unable to save settings');\r\n\r\n                    // reset dashboard form state\r\n                    this.$scope.preflightSettingsForm.$setPristine();\r\n                });\r\n        }\r\n    }\r\n}","﻿(() => {\r\n\r\n    const postSaveUrl = '/umbracoapi/content/postsave';\r\n    let presaveText;\r\n\r\n    function interceptor(notificationsService, overlayService, editorState, $rootScope, $q, $injector) {\r\n\r\n        const checkGroup = (userGroupOptInOut, culture) => {\r\n            var value = userGroupOptInOut.value[culture];\r\n            var enabledGroups = userGroupOptInOut.prevalues.filter(x => value.includes(x.value)).map(x => x.key);\r\n\r\n            let localizationService;\r\n            $injector.invoke(['localizationService', service => localizationService = service]);\r\n\r\n            $injector.invoke(['authResource', authResource => {\r\n                const promises = [\r\n                    authResource.getCurrentUser(),\r\n                    localizationService.localize('preflight_presaveText'),\r\n                ];\r\n\r\n                $q.all(promises)\r\n                    .then(resp => {\r\n                        const currentUser = resp[0];\r\n                        presaveText = resp[1];\r\n\r\n                        if (enabledGroups.some(x => currentUser.userGroups.includes(x))) {\r\n                            notificationsService.info('Preflight', presaveText);\r\n                        }\r\n                    });\r\n            }]);\r\n        };\r\n\r\n        return {\r\n            request: request => {\r\n                if (request.url.toLowerCase().includes(postSaveUrl)) {\r\n                    $injector.invoke(['preflightService', s => {\r\n                        s.getSettings()\r\n                            .then(resp => {\r\n                                const settings = resp.data.settings;\r\n\r\n                                // settings values are a dictionary keyed by culture\r\n                                const variantsToSave = request.data.value.variants.filter(v => v.save);\r\n                                const preflightVars = Umbraco.Sys.ServerVariables.Preflight;\r\n\r\n                                variantsToSave.forEach(variant => {\r\n                                    const culture = variant.language ? variant.language.culture : preflightVars.DefaultCulture;\r\n                                    const runOnSave = settings.find(x => x.guid === preflightVars.SettingsGuid.BindSaveHandler);\r\n\r\n                                    if (runOnSave && runOnSave.value[culture] === '1') {\r\n                                        const userGroupOptInOut = settings.find(x => x.guid === preflightVars.SettingsGuid.UserGroupOptIn);\r\n                                        checkGroup(userGroupOptInOut, culture);\r\n                                    }\r\n                                });\r\n                            });\r\n                    }]);\r\n                }\r\n\r\n                return request || $q.when(request);\r\n            },\r\n            response: response => {\r\n                try {\r\n                    if (response.config.url.toLowerCase().includes(postSaveUrl)) {\r\n\r\n                        const index = notificationsService.current.findIndex(x => x.message === presaveText);\r\n                        if (index > -1) {\r\n                            setTimeout(() => notificationsService.remove(index), 1500);\r\n                        }\r\n\r\n                        if (response.data.notifications) {\r\n\r\n                            const notification = response.data.notifications.filter(f => f.header === Umbraco.Sys.ServerVariables.Preflight.ContentFailedChecks)[0];\r\n\r\n                            if (notification) {\r\n                                response.data.notifications = [];\r\n\r\n                                overlayService.open({\r\n                                    view: `${Umbraco.Sys.ServerVariables.Preflight.PluginPath}/views/failed.notification.html`,\r\n                                    submitButtonLabelKey: 'preflight_review',\r\n                                    hideHeader: true,\r\n                                    saveCancelled: notification.message.includes('_True'),\r\n                                    submit: () => {\r\n                                        $rootScope.$emit('showPreflight', { nodeId: editorState.current.id });\r\n                                        overlayService.close();\r\n                                    },\r\n                                    close: () => overlayService.close()\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.log(err.message);\r\n                }\r\n\r\n                return response || $q.when(response);\r\n            }\r\n        };\r\n    }\r\n\r\n    angular.module('preflight')\r\n        .factory('preflight.save.interceptor', ['notificationsService', 'overlayService', 'editorState', '$rootScope', '$q', '$injector', interceptor])\r\n        .config($httpProvider => $httpProvider.interceptors.push('preflight.save.interceptor'));\r\n\r\n})();","﻿import { LinkHealthResultComponent } from './linkhealth/linkhealth.result.component';\r\nimport { ReadabilityPluginController } from './readability/readability.plugin.controller';\r\n\r\nexport const PluginsModule = angular\r\n    .module('preflight.plugins', [])\r\n    .component(LinkHealthResultComponent.name, LinkHealthResultComponent)\r\n    .controller(ReadabilityPluginController.controllerName, ReadabilityPluginController)\r\n    .name;","﻿export const LinkHealthResultComponent = {\r\n    name: 'linkHealthResult',\r\n    transclude: true,\r\n    bindings: {\r\n        results: '<'\r\n    },\r\n    template: `\r\n        <table class=\"linkhealth-result-table\">\r\n            <thead>\r\n                <tr><th>Link text</th> <th>Link target</th> <th>Link status</th></tr>\r\n            </thead>\r\n            <tr ng-repeat=\"link in $ctrl.results\"><td ng-bind=\"link.text\"></td><td ng-bind=\"link.href\"></td><td ng-bind=\"link.status\"></td></tr>\r\n        </table>`\r\n}","﻿export class ReadabilityPluginController {\r\n\r\n    static controllerName = 'readability.plugin.controller';\r\n\r\n    $scope;\r\n    editorService;\r\n\r\n    constructor($scope, editorService) {\r\n        this.$scope = $scope;\r\n        this.editorService = editorService;\r\n    }\r\n\r\n    help = () => {\r\n        const helpOverlay = {\r\n            view: `${Umbraco.Sys.ServerVariables.Preflight.PluginPath}/plugins/readability/readability.overlay.html`,\r\n            title: 'Readability',\r\n            description: 'Why should I care?',\r\n            size: 'small',\r\n            text: this.$scope.model.description,\r\n            close: () => this.editorService.close()                \r\n        };\r\n\r\n        this.editorService.open(helpOverlay);\r\n    };\r\n}\r\n","﻿import { PreflightService } from './preflight.service';\r\nimport { PreflightHub } from './preflight.hub';\r\n\r\nexport const ServicesModule = angular\r\n    .module('preflight.services', [])\r\n    .service(PreflightService.serviceName, PreflightService)\r\n    .service(PreflightHub.serviceName, PreflightHub)\r\n    .name;","﻿export class PreflightHub {\r\n\r\n    static serviceName = 'preflightHub';\r\n\r\n    $rootScope;\r\n    $q;\r\n    assetsService;\r\n\r\n    scripts = [];\r\n    callbacks = [];\r\n\r\n    starting = false\r\n    platform = Umbraco.Sys.ServerVariables.Preflight.Platform;\r\n\r\n    constructor($rootScope, $q, assetsService) {\r\n        this.$rootScope = $rootScope;\r\n        this.$q = $q;\r\n        this.assetsService = assetsService;\r\n\r\n        const umbracoPath = Umbraco.Sys.ServerVariables.umbracoSettings.umbracoPath;\r\n        if (this.platform === 'CORE') {\r\n            this.scripts = [umbracoPath + '/lib/signalr/signalr.min.js'];\r\n        } else {\r\n            this.scripts = [\r\n                umbracoPath + '/lib/signalr/jquery.signalr.js',\r\n                umbracoPath + '/backoffice/signalr/hubs'\r\n            ];\r\n        }\r\n    }\r\n\r\n    setupHub = callback => {\r\n        \r\n        let proxy;\r\n        let hub = {};\r\n\r\n        if (this.platform === 'CORE') {\r\n            $.connection = new signalR.HubConnectionBuilder()\r\n                .withUrl(Umbraco.Sys.ServerVariables.Preflight.signalRHub)\r\n                .withAutomaticReconnect()\r\n                .configureLogging(signalR.LogLevel.Warning)\r\n                .build();\r\n\r\n            proxy = $.connection;\r\n        }\r\n        else {\r\n            proxy = $.connection.preflightHub;\r\n        }\r\n\r\n        if (proxy !== undefined) {\r\n            hub = {\r\n                active: true,\r\n                start: callback => {\r\n                    if (this.platform === 'CORE') {\r\n                        try {\r\n                            proxy.start()\r\n                                .then(() => callback ? callback() : {})\r\n                                .catch(() => console.warn('Failed to start hub'));\r\n                        } catch (e) {\r\n                            console.warn('Could not setup signalR connection', e);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if ($.connection.hub.state !== $.connection.connectionState.disconnected) {\r\n                            $.connection.hub.stop(true, true);\r\n                        }\r\n                        $.connection.hub.start();\r\n                        callback ? callback() : {};\r\n                    }\r\n                },\r\n                on: (eventName, callback) => {\r\n                    proxy.on(eventName, result => {\r\n                        this.$rootScope.$apply(() => {\r\n                            if (callback) {\r\n                                callback(result);\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            };\r\n        } else {\r\n            hub = {\r\n                on: () => { },\r\n                start: () => console.warn('No hub to start'),\r\n            };\r\n        }\r\n        \r\n        return callback(hub);\r\n    }\r\n\r\n\r\n    /**\r\n     * Function is common across 472 and 5.0\r\n     * */\r\n    processCallbacks() {\r\n        while (this.callbacks.length) {\r\n            const cb = this.callbacks.pop();\r\n            this.setupHub(cb);\r\n        }\r\n\r\n        this.starting = false;\r\n    }\r\n\r\n    /**\r\n     * Function is common across 472 and 5.0 \r\n     * @param callback\r\n     */\r\n    initHub(callback) {\r\n        this.callbacks.push(callback);\r\n\r\n        if (!this.starting) {\r\n            if ($.connection === undefined) {\r\n                this.starting = true;\r\n\r\n                const promises = [];\r\n                this.scripts.forEach(script => promises.push(this.assetsService.loadJs(script)));\r\n\r\n                this.$q.all(promises).then(() => this.processCallbacks());\r\n            } else {\r\n                this.processCallbacks();\r\n            }\r\n        }\r\n    }\r\n}","﻿export class PreflightService {\r\n\r\n    static serviceName = 'preflightService';\r\n\r\n    $http;\r\n    umbRequestHelper;\r\n\r\n    urlBase = Umbraco.Sys.ServerVariables.Preflight.ApiPath;\r\n\r\n    static helpText = `\r\n        <p>If your content is too difficult for your visitors to read, you're all going to have a bad time.</p>\r\n        <p>The readability test runs your content through the Flesch reading ease algorithm to determine text complexity.</p>\r\n        <h5>The algorithm</h5>\r\n        <p><code>RE = 206.835 - (1.015 x ASL) - (84.6 x ASW)</code></p>\r\n        <p>Where <code>RE</code> is Readability Ease, <code>ASL</code> is Average Sentence Length, and <code>ASW</code> is Average Syllables per Word</p>\r\n        <p>The result is a number between 0 and 100, where a higher score means better readability, with a score between 60 and 69 largely considered acceptable.</p>\r\n        <h5>Readability test results</h5>\r\n        <p>As well as the Flesch score, the readability test returns sentence length; average syllables per word; and long or complex words;</p>`;\r\n\r\n\r\n    constructor($http, umbRequestHelper) {\r\n        this.$http = $http;\r\n        this.umbRequestHelper = umbRequestHelper;\r\n    }\r\n\r\n    request = (method, url, data) =>\r\n        this.umbRequestHelper.resourcePromise(\r\n            method === 'GET' ? this.$http.get(this.urlBase + url) : this.$http.post(this.urlBase + url, data),\r\n            'Something broke'\r\n        );\r\n\r\n    check = (id, culture) => this.request('GET', `Check/${id}/${culture} `);\r\n\r\n    checkDirty = data => this.request('POST', `CheckDirty`, data);\r\n\r\n    getSettings = () => this.request('GET', `GetSettings`);\r\n\r\n    saveSettings = (settings, tabs) => this.request('POST', `SaveSettings`, {\r\n        settings,\r\n        tabs\r\n    });\r\n\r\n    getHelpText = () => helpText;\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvUHJlZmxpZ2h0L0JhY2tvZmZpY2UvYXBwLmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL2NvbXBvbmVudHMvX2NvbXBvbmVudHNNb2R1bGUuanMiLCJzcmMvUHJlZmxpZ2h0L0JhY2tvZmZpY2UvY29tcG9uZW50cy9jYXJkL2NhcmQuY29tcG9uZW50LmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL2NvbXBvbmVudHMvcHJvZ3Jlc3NjaXJjbGUvcHJvZ3Jlc3NjaXJjbGUuY29tcG9uZW50LmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL2NvbXBvbmVudHMvcmVzdWx0aW50cm8uY29tcG9uZW50LmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL2NvbXBvbmVudHMvc3RhdGVpY29uL3N0YXRlaWNvbi5jb21wb25lbnQuanMiLCJzcmMvUHJlZmxpZ2h0L0JhY2tvZmZpY2UvY29uc3RhbnRzLmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL2NvbnRyb2xsZXJzL19jb250cm9sbGVyc01vZHVsZS5qcyIsInNyYy9QcmVmbGlnaHQvQmFja29mZmljZS9jb250cm9sbGVycy9ub3RpZmljYXRpb24uY29udHJvbGxlci5qcyIsInNyYy9QcmVmbGlnaHQvQmFja29mZmljZS9jb250cm9sbGVycy9wcmVmbGlnaHQuY29udHJvbGxlci5qcyIsInNyYy9QcmVmbGlnaHQvQmFja29mZmljZS9jb250cm9sbGVycy9zZXR0aW5ncy5jb250cm9sbGVyLmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL2ludGVyY2VwdG9ycy9wcmVmbGlnaHQuc2F2ZS5pbnRlcmNlcHRvci5qcyIsInNyYy9QcmVmbGlnaHQvQmFja29mZmljZS9wbHVnaW5zL19wbHVnaW5zTW9kdWxlLmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL3BsdWdpbnMvbGlua2hlYWx0aC9saW5raGVhbHRoLnJlc3VsdC5jb21wb25lbnQuanMiLCJzcmMvUHJlZmxpZ2h0L0JhY2tvZmZpY2UvcGx1Z2lucy9yZWFkYWJpbGl0eS9yZWFkYWJpbGl0eS5wbHVnaW4uY29udHJvbGxlci5qcyIsInNyYy9QcmVmbGlnaHQvQmFja29mZmljZS9yZXNvdXJjZXMvX3NlcnZpY2VzTW9kdWxlLmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL3Jlc291cmNlcy9wcmVmbGlnaHQuaHViLmpzIiwic3JjL1ByZWZsaWdodC9CYWNrb2ZmaWNlL3Jlc291cmNlcy9wcmVmbGlnaHQuc2VydmljZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUM7O0FBQ0Q7O0FBQ0E7O0FBQ0E7O0FBRUEsSUFBTSxJQUFJLEdBQUcsV0FBYjtBQUVBLE9BQU8sQ0FBQyxNQUFSLENBQWUsSUFBZixFQUFxQixDQUNqQiw4QkFEaUIsRUFFakIsa0NBRmlCLEVBR2pCLG9DQUhpQixFQUlqQiw0QkFKaUIsQ0FBckI7QUFPQSxPQUFPLENBQUMsTUFBUixDQUFlLFNBQWYsRUFBMEIsUUFBMUIsQ0FBbUMsSUFBbkMsQ0FBd0MsSUFBeEM7Ozs7Ozs7Ozs7QUNkQzs7QUFDRDs7QUFDQTs7QUFDQTs7QUFFTyxJQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FDbEMsTUFEMkIsQ0FDcEIsc0JBRG9CLEVBQ0ksRUFESixFQUUzQixTQUYyQixDQUVqQixvQkFBYyxJQUZHLEVBRUcsbUJBRkgsRUFHM0IsU0FIMkIsQ0FHakIsa0NBQXFCLElBSEosRUFHVSxpQ0FIVixFQUkzQixTQUoyQixDQUlqQiw4QkFBbUIsSUFKRixFQUlRLDZCQUpSLEVBSzNCLFNBTDJCLENBS2pCLHdDQUF3QixJQUxQLEVBS2EsdUNBTGIsRUFNM0IsSUFORTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQ0xBLEk7QUFnQkgsZ0JBQVksbUJBQVosRUFBaUM7QUFBQTs7QUFBQSx1Q0FMckIsTUFLcUI7O0FBQUEsNENBSmhCLFlBSWdCOztBQUFBOztBQUM3QixTQUFLLG1CQUFMLEdB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QyxPQUFMLENBQWEsTUFBYixrQkFBcUM7QUFDcEUsTUFBQSxRQUFRLEVBQVIsUUFEb0U7QUFFcEUsTUFBQSxJQUFJLEVBQUo7QUFGb0UsS0FBckMsQ0FBcEI7QUFBQSxHQWpCc0I7O0FBQUEsdUNBc0J2QjtBQUFBLFdBQU0sUUFBTjtBQUFBLEdBdEJ1Qjs7QUFDakMsT0FBSyxLQUFMLEdBQWEsS0FBYjtBQUNBLE9BQUssZ0JBQUwsR0FBd0IsZ0JBQXhCO0FBQ0gsQzs7OztnQkF2QlMsZ0IsaUJBRVcsa0I7O2dCQUZYLGdCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwi77u/aW1wb3J0IHsgU2VydmljZXNNb2R1bGUgfSBmcm9tICcuL3Jlc291cmNlcy9fc2VydmljZXNNb2R1bGUnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRzTW9kdWxlIH0gZnJvbSAnLi9jb21wb25lbnRzL19jb21wb25lbnRzTW9kdWxlJztcclxuaW1wb3J0IHsgQ29udHJvbGxlcnNNb2R1bGUgfSBmcm9tICcuL2NvbnRyb2xsZXJzL19jb250cm9sbGVyc01vZHVsZSc7XHJcbmltcG9ydCB7IFBsdWdpbnNNb2R1bGUgfSBmcm9tICcuL3BsdWdpbnMvX3BsdWdpbnNNb2R1bGUnO1xyXG5cclxuY29uc3QgbmFtZSA9ICdwcmVmbGlnaHQnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUobmFtZSwgW1xyXG4gICAgU2VydmljZXNNb2R1bGUsXHJcbiAgICBDb21wb25lbnRzTW9kdWxlLFxyXG4gICAgQ29udHJvbGxlcnNNb2R1bGUsXHJcbiAgICBQbHVnaW5zTW9kdWxlLFxyXG5dKTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCd1bWJyYWNvJykucmVxdWlyZXMucHVzaChuYW1lKTsiLCLvu79pbXBvcnQgeyBDYXJkQ29tcG9uZW50IH0gZnJvbSAnLi9jYXJkL2NhcmQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgUHJvZ3Jlc3NDaXJjbGVDb21wb25lbnQgfSBmcm9tICcuL3Byb2dyZXNzY2lyY2xlL3Byb2dyZXNzY2lyY2xlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFJlc3VsdEludHJvQ29tcG9uZW50IH0gZnJvbSAnLi9yZXN1bHRpbnRyby5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTdGF0ZUljb25Db21wb25lbnQgfSBmcm9tICcuL3N0YXRlaWNvbi9zdGF0ZWljb24uY29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBjb25zdCBDb21wb25lbnRzTW9kdWxlID0gYW5ndWxhclxyXG4gICAgLm1vZHVsZSgncHJlZmxpZ2h0LmNvbXBvbmVudHMnLCBbXSlcclxuICAgIC5jb21wb25lbnQoQ2FyZENvbXBvbmVudC5uYW1lLCBDYXJkQ29tcG9uZW50KVxyXG4gICAgLmNvbXBvbmVudChSZXN1bHRJbnRyb0NvbXBvbmVudC5uYW1lLCBSZXN1bHRJbnRyb0NvbXBvbmVudClcclxuICAgIC5jb21wb25lbnQoU3RhdGVJY29uQ29tcG9uZW50Lm5hbWUsIFN0YXRlSWNvbkNvbXBvbmVudClcclxuICAgIC5jb21wb25lbnQoUHJvZ3Jlc3NDaXJjbGVDb21wb25lbnQubmFtZSwgUHJvZ3Jlc3NDaXJjbGVDb21wb25lbnQpXHJcbiAgICAubmFtZTsiLCLvu79jbGFzcyBDYXJkIHtcclxuXHJcbiAgICBzdGF0aWMgdGVtcGxhdGUgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQge3sgOjokY3RybC5jYXJkQ2xhc3MgfX1cIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJkLXNjb3JlIHt7IDo6JGN0cmwuY2FyZFNjb3JlQ2xhc3MgfX1cIiBuZy1iaW5kPVwiOjokY3RybC5zY29yZVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJkLXRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICB7eyA6OiRjdHJsLnRpdGxlIH19PGJyIC8+XHJcbiAgICAgICAgICAgICAgICB7eyA6OiRjdHJsLnN1YnRpdGxlIH19XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGNhcmRDbGFzcyA9ICdwYXNzJztcclxuICAgIGNhcmRTY29yZUNsYXNzID0gJ3Bhc3MtY29sb3InO1xyXG5cclxuICAgIGxvY2FsaXphdGlvblNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IobG9jYWxpemF0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZSA9IGxvY2FsaXphdGlvblNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgJG9uSW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5mYWlsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkQ2xhc3MgPSAnZmFpbCc7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZFNjb3JlQ2xhc3MgPSAnZmFpbC1jb2xvcic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy50aXRsZVswXSA9PT0gJ0AnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5sb2NhbGl6ZSh0aGlzLnRpdGxlLCB0aGlzLnRva2VucylcclxuICAgICAgICAgICAgICAgIC50aGVuKGxvY2FsaXplZFRpdGxlID0+IHRoaXMudGl0bGUgPSBsb2NhbGl6ZWRUaXRsZSk7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3VidGl0bGVbMF0gPT09ICdAJykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UubG9jYWxpemUodGhpcy5zdWJ0aXRsZSwgdGhpcy50b2tlbnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihsb2NhbGl6ZWRTdWJ0aXRsZSA9PiB0aGlzLnN1YnRpdGxlID0gbG9jYWxpemVkU3VidGl0bGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDYXJkQ29tcG9uZW50ID0ge1xyXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSwgXHJcbiAgICBuYW1lOiAncHJlZmxpZ2h0Q2FyZCcsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIHRpdGxlOiAnQD8nLFxyXG4gICAgICAgIHN1YnRpdGxlOiAnQD8nLFxyXG4gICAgICAgIGZhaWxlZDogJzwnLFxyXG4gICAgICAgIHNjb3JlOiAnPCcsXHJcbiAgICAgICAgdG9rZW5zOiAnPCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogQ2FyZC50ZW1wbGF0ZSxcclxuICAgIGNvbnRyb2xsZXI6IENhcmRcclxufTtcclxuIiwi77u/Y2xhc3MgUHJvZ3Jlc3NDaXJjbGUge1xuXG4gICAgc3RhdGljIHRlbXBsYXRlID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidW1iLXByb2dyZXNzLWNpcmNsZSBwcmVmbGlnaHQtcHJvZ3Jlc3MtY2lyY2xlXCIgbmctc3R5bGU9XCJ7J3dpZHRoJzogJGN0cmwuc2l6ZSwgJ2hlaWdodCc6ICRjdHJsLnNpemUgfVwiPlxuICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInVtYi1wcm9ncmVzcy1jaXJjbGVfX3ZpZXctYm94XCIgdmlld0JveD1cIjAgMCAzMy44MzA5ODg2MiAzMy44MzA5ODg2MlwiPiBcbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzPVwidW1iLXByb2dyZXNzLWNpcmNsZV9faGlnaGxpZ2h0LS17eyAkY3RybC5iYWNrZ3JvdW5kIH19XCIgY3g9XCIxNi45MTU0OTQzMVwiIGN5PVwiMTYuOTE1NDk0MzFcIiByPVwiMTUuOTE1NDk0MzFcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIi41XCI+PC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzcz1cInVtYi1wcm9ncmVzcy1jaXJjbGVfX2hpZ2hsaWdodCB1bWItcHJvZ3Jlc3MtY2lyY2xlX19oaWdobGlnaHQtLXt7ICRjdHJsLmZvcmVncm91bmQgfX1cIlxuICAgICAgICAgICAgICAgICAgICBjeD1cIjE2LjkxNTQ5NDMxXCIgY3k9XCIxNi45MTU0OTQzMVwiIHI9XCIxNS45MTU0OTQzMVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtZGFzaGFycmF5PVwie3sgJGN0cmwuZGFzaEFycmF5IH19XCI+PC9jaXJjbGU+XG4gICAgICAgICAgICA8L3N2Zz4gXG4gICAgICAgICAgICA8ZGl2IG5nLXN0eWxlPVwieydmb250LXNpemUnOiAkY3RybC5wZXJjZW50YWdlU2l6ZX1cIiBjbGFzcz1cInVtYi1wcm9ncmVzcy1jaXJjbGVfX3BlcmNlbnRhZ2VcIj5cbiAgICAgICAgICAgICAgICB7eyAkY3RybC5sYWJlbCB9fVxuICAgICAgICAgICAgICAgIDxzbWFsbD5wYXNzIHJhdGU8L3NtYWxsPiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5gO1xuXG4gICAgcjtcbiAgICAkZWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCRlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuciA9ICRlbGVtZW50LmZpbmQoJy51bWItcHJvZ3Jlc3MtY2lyY2xlX19oaWdobGlnaHQnKS5hdHRyKCdyJyk7XHJcbiAgICB9XG5cbiAgICAkb25DaGFuZ2VzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgIH1cblxuICAgIGRyYXcgPSAoKSA9PiB7XG4gICAgICAgIGxldCBwZXJjZW50ID0gTWF0aC5yb3VuZCh0aGlzLnBlcmNlbnRhZ2UpO1xuICAgICAgICBwZXJjZW50ID0gcGVyY2VudCA+IDEwMCA/IDEwMCA6IHBlcmNlbnQgfHwgMDtcblxuICAgICAgICAvLyBjYWxjdWxhdGluZyB0aGUgY2lyY2xlJ3MgaGlnaGxpZ2h0XG4gICAgICAgIGNvbnN0IHBhdGhMZW5ndGggPSB0aGlzLnIgKiBNYXRoLlBJICogMiAqIHBlcmNlbnQgLyAxMDA7XG5cbiAgICAgICAgLy8gRnVsbCBjaXJjbGUgbGVuZ3RoXG4gICAgICAgIHRoaXMuZGFzaEFycmF5ID0gYCR7cGF0aExlbmd0aH0sMTAwYDtcblxuICAgICAgICAvLyBzZXQgZm9udCBzaXplXG4gICAgICAgIHRoaXMucGVyY2VudGFnZVNpemUgPSB0aGlzLnNpemUgKiAwLjMgKyAncHgnO1xuXG4gICAgICAgIC8vIHVzZSByb3VuZGVkIHBlcmNlbnRhZ2VcbiAgICAgICAgdGhpcy5sYWJlbCA9IGAke3BlcmNlbnR9JWA7XHJcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBQcm9ncmVzc0NpcmNsZUNvbXBvbmVudCA9IHtcclxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICBuYW1lOiAncHJvZ3Jlc3NDaXJjbGUnLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBzaXplOiAnQD8nLFxuICAgICAgICBwZXJjZW50YWdlOiAnPCcsXG4gICAgICAgIGRvbmU6ICdAJyxcbiAgICAgICAgZm9yZWdyb3VuZDogJ0AnLFxuICAgICAgICBiYWNrZ3JvdW5kOiAnQCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogUHJvZ3Jlc3NDaXJjbGUudGVtcGxhdGUsXHJcbiAgICBjb250cm9sbGVyOiBQcm9ncmVzc0NpcmNsZVxyXG59O1xyXG4iLCLvu79jbGFzcyBSZXN1bHRJbnRybyB7XHJcbiAgICAvKipcclxuICAgICAqIERpcmVjdGl2ZSB1c2VkIHRvIHJlbmRlciB0aGUgaGVhZGluZyBmb3IgYSBwbHVnaW4gaW4gdGhlIHJlc3VsdHMgdmlld1xyXG4gICAgICogU2VuZCBhIHN0cmluZ2lmaWVkIGFycmF5IGFzIHRoZSB0b2tlbnMgYXR0cmlidXRlIHRvIHJlcGxhY2UgJTAlLCAlMSUgLi4gJW4lIGluIHRoZSBsb2NhbGl6ZWQgc3RyaW5nXHJcbiAgICAgKi9cclxuXHJcbiAgICBzdGF0aWMgdGVtcGxhdGUgPSBgXHJcbiAgICAgICAgPGg1IG5nLWJpbmQ9XCI6OiRjdHJsLmhlYWRpbmdcIiBjbGFzcz1cIm10MFwiPjwvaDU+XHJcbiAgICAgICAgPHNwYW4gbmctaWY9XCIkY3RybC5wYXNzXCIgbmctYmluZD1cIjo6JGN0cmwucGFzc1RleHRcIj48L3NwYW4+YDtcclxuXHJcbiAgICBsb2NhbGl6YXRpb25TZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvblNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuICAgICRvbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFzc1RleHRbMF0gPT09ICdAJykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UubG9jYWxpemUodGhpcy5wYXNzVGV4dCwgdGhpcy50b2tlbnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihsb2NhbGl6ZWRQYXNzVGV4dCA9PiB0aGlzLnBhc3NUZXh0ID0gbG9jYWxpemVkUGFzc1RleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGluZ1swXSA9PT0gJ0AnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5sb2NhbGl6ZSh0aGlzLmhlYWRpbmcsIHRoaXMudG9rZW5zKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4obG9jYWxpemVkSGVhZGluZyA9PiB0aGlzLmhlYWRpbmcgPSBsb2NhbGl6ZWRIZWFkaW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUmVzdWx0SW50cm9Db21wb25lbnQgPSB7XHJcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgbmFtZTogJ3ByZWZsaWdodFJlc3VsdEludHJvJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgdG9rZW5zOiAnPCcsXHJcbiAgICAgICAgcGFzc1RleHQ6ICdAPycsXHJcbiAgICAgICAgaGVhZGluZzogJ0A/JyxcclxuICAgICAgICBwYXNzOiAnPCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogUmVzdWx0SW50cm8udGVtcGxhdGUsXHJcbiAgICBjb250cm9sbGVyOiBSZXN1bHRJbnRyb1xyXG59OyIsIu+7v2NsYXNzIFN0YXRlSWNvbiB7XHJcblxyXG4gICAgc3RhdGljIHRlbXBsYXRlID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0ZS1pY29uIHt7IDo6JGN0cmwuY2xhc3NOYW1lIH19XCI+XHJcbiAgICAgICAgICAgIDx1bWItaWNvbiBpY29uPVwiaWNvbi17eyA6OiRjdHJsLmljb24gfX1cIj48L3VtYi1pY29uPlxyXG4gICAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgaWNvbiA9ICdwb3dlcic7XHJcbiAgICBjbGFzc05hbWUgPSAnZGlzYWJsZWQnO1xyXG5cclxuICAgICRvbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaWNvbiA9IHRoaXMuZmFpbGVkID8gJ2RlbGV0ZScgOiAnY2hlY2snO1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IHRoaXMuZmFpbGVkID8gJ2ZhaWwnIDogJ3Bhc3MnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTdGF0ZUljb25Db21wb25lbnQgPSB7XHJcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgbmFtZTogJ3ByZWZsaWdodFN0YXRlSWNvbicsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIGZhaWxlZDogJzwnLFxyXG4gICAgICAgIGRpc2FibGVkOiAnPCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogU3RhdGVJY29uLnRlbXBsYXRlLFxyXG4gICAgY29udHJvbGxlcjogU3RhdGVJY29uLFxyXG59O1xyXG4iLCLvu79leHBvcnQgY29uc3QgY29uc3RhbnRzID0ge1xyXG4gICAgY2hlY2tib3hsaXN0OiAnY2hlY2tib3hsaXN0JyxcclxuICAgIG11bHRpcGxldGV4dGJveDogJ211bHRpcGxldGV4dGJveCcsXHJcbn0iLCLvu79pbXBvcnQgeyBQcmVmbGlnaHRDb250cm9sbGVyIH0gZnJvbSAnLi9wcmVmbGlnaHQuY29udHJvbGxlcic7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIgfSBmcm9tICcuL25vdGlmaWNhdGlvbi5jb250cm9sbGVyJztcclxuaW1wb3J0IHsgU2V0dGluZ3NDb250cm9sbGVyIH0gZnJvbSAnLi9zZXR0aW5ncy5jb250cm9sbGVyJztcclxuXHJcbmV4cG9ydCBjb25zdCBDb250cm9sbGVyc01vZHVsZSA9IGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3ByZWZsaWdodC5jb250cm9sbGVycycsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoUHJlZmxpZ2h0Q29udHJvbGxlci5jb250cm9sbGVyTmFtZSwgUHJlZmxpZ2h0Q29udHJvbGxlcilcclxuICAgIC5jb250cm9sbGVyKE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIuY29udHJvbGxlck5hbWUsIE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIpXHJcbiAgICAuY29udHJvbGxlcihTZXR0aW5nc0NvbnRyb2xsZXIuY29udHJvbGxlck5hbWUsIFNldHRpbmdzQ29udHJvbGxlcilcclxuICAgIC5uYW1lOyIsIu+7v2V4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25Db250cm9sbGVyIHtcclxuXHJcbiAgICBzdGF0aWMgY29udHJvbGxlck5hbWUgPSAncHJlZmxpZ2h0Lm5vdGlmaWNhdGlvbi5jb250cm9sbGVyJztcclxuXHJcbiAgICBzYXZlQ2FuY2VsbGVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgIH1cclxufVxyXG4iLCLvu79leHBvcnQgY2xhc3MgUHJlZmxpZ2h0Q29udHJvbGxlciB7XHJcblxyXG4gICAgc3RhdGljIGNvbnRyb2xsZXJOYW1lID0gJ3ByZWZsaWdodC5jb250cm9sbGVyJztcclxuXHJcbiAgICAkc2NvcGU7XHJcbiAgICAkcm9vdFNjb3BlO1xyXG4gICAgJGVsZW1lbnQ7XHJcbiAgICAkdGltZW91dDtcclxuICAgIGVkaXRvclN0YXRlO1xyXG4gICAgcHJlZmxpZ2h0U2VydmljZTtcclxuICAgIHByZWZsaWdodEh1YjtcclxuXHJcbiAgICBkaXJ0eUhhc2hlcyA9IHt9O1xyXG4gICAgdmFsaWRQcm9wVHlwZXM7XHJcbiAgICBwcm9wc0JlaW5nQ2hlY2tlZCA9IFtdO1xyXG4gICAgcHJvcGVydGllc1RvVHJhY2sgPSBbXTtcclxuICAgIGRpcnR5UHJvcHMgPSBbXTtcclxuXHJcbiAgICByZXN1bHRzID0ge1xyXG4gICAgICAgIHByb3BlcnRpZXM6IFtdXHJcbiAgICB9O1xyXG5cclxuICAgIGpzb25Qcm9wZXJ0aWVzID0gW1xyXG4gICAgICAgICdVbWJyYWNvLkdyaWQnLFxyXG4gICAgICAgICdVbWJyYWNvLk5lc3RlZENvbnRlbnQnLFxyXG4gICAgXTtcclxuXHJcbiAgICBibG9ja0xpc3RFZGl0b3JBbGlhcyA9ICdVbWJyYWNvLkJsb2NrTGlzdCc7XHJcblxyXG4gICAgbm9UZXN0cyA9IGZhbHNlO1xyXG4gICAgcGVyY2VudGFnZURvbmUgPSAyMDtcclxuICAgIHByb2dyZXNzU3RlcCA9IDA7XHJcbiAgICBhY3RpdmVWYXJpYW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCRzY29wZSwgJHJvb3RTY29wZSwgJGVsZW1lbnQsICR0aW1lb3V0LCBlZGl0b3JTdGF0ZSwgcHJlZmxpZ2h0U2VydmljZSwgcHJlZmxpZ2h0SHViKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMuZWRpdG9yU3RhdGUgPSBlZGl0b3JTdGF0ZTtcclxuICAgICAgICB0aGlzLnByZWZsaWdodFNlcnZpY2UgPSBwcmVmbGlnaHRTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMucHJlZmxpZ2h0SHViID0gcHJlZmxpZ2h0SHViO1xyXG5cclxuICAgICAgICB0aGlzLnZhbGlkUHJvcFR5cGVzID0gVW1icmFjby5TeXMuU2VydmVyVmFyaWFibGVzLlByZWZsaWdodC5Qcm9wZXJ0eVR5cGVzVG9DaGVjaztcclxuXHJcbiAgICAgICAgdGhpcy4kc2NvcGUubW9kZWwuYmFkZ2UgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdpbmZvJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCdhcHAudGFiQ2hhbmdlJywgKGUsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuYWxpYXMgPT09ICdwcmVmbGlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb2xsYXBzZSBvcGVuIG5jIGNvbnRyb2xzLCB0aW1lb3V0cyBwcmV2ZW50ICRhcHBseSBlcnJvcnNcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG9wZW5OYyBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudW1iLW5lc3RlZC1jb250ZW50X19pdGVtLS1hY3RpdmUgLnVtYi1uZXN0ZWQtY29udGVudF9faGVhZGVyLWJhcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4gb3Blbk5jLmNsaWNrKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRGlydHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJhZGdlQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCdzaG93UHJlZmxpZ2h0JywgKGV2ZW50LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLm5vZGVJZCA9PT0gJHNjb3BlLmNvbnRlbnQuaWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5lZWRzIHRvIGZpbmQgYXBwIGNsb3Nlc3QgdG8gY3VycmVudCBzY29wZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwTGluayA9ICRlbGVtZW50LmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCdbZGF0YS1lbGVtZW50PVwic3ViLXZpZXctcHJlZmxpZ2h0XCJdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFwcExpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBMaW5rLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7YW55fSBhcnJcclxuICAgICAqL1xyXG4gICAgam9pbkxpc3QgPSBhcnIgPT4ge1xyXG4gICAgICAgIGxldCBvdXRTdHI7XHJcbiAgICAgICAgaWYgKGFyci5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgb3V0U3RyID0gYXJyWzBdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXJyLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICBvdXRTdHIgPSBhcnIuam9pbignIGFuZCAnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFyci5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgIG91dFN0ciA9IGFyci5zbGljZSgwLCAtMSkuam9pbignLCAnKSArICcsIGFuZCAnICsgYXJyLnNsaWNlKC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvdXRTdHI7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBoYXNoIGZvciBzdG9yYWdlIGFuZCBjb21wYXJpc29uLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSB0aGUgc3RyaW5nIHRvIGhhc2hpZnlcclxuICAgICAqIEByZXR1cm5zIHtpbnR9IHRoZSBnZW5lcmF0ZWQgaGFzaFxyXG4gICAgICovXHJcbiAgICBnZXRIYXNoID0gcyA9PiBzID8gcy5zcGxpdCgnJykucmVkdWNlKChhLCBiKSA9PiB7XHJcbiAgICAgICAgYSA9IChhIDw8IDUpIC0gYSArIGIuY2hhckNvZGVBdCgwKTtcclxuICAgICAgICByZXR1cm4gYSAmIGE7XHJcbiAgICB9LCAwKSA6IDE7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHByb3BlcnR5IGJ5IGFsaWFzIGZyb20gdGhlIGN1cnJlbnQgdmFyaWFudFxyXG4gICAgICogQHBhcmFtIHthbnl9IGFsaWFzXHJcbiAgICAgKi9cclxuICAgIGdldFByb3BlcnR5ID0gYWxpYXMgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IHRhYiBvZiB0aGlzLmVkaXRvclN0YXRlLmN1cnJlbnQudmFyaWFudHMuZmluZCh4ID0+IHguYWN0aXZlKS50YWJzKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3Agb2YgdGFiLnByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wLmFsaWFzID09PSBhbGlhcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7YW55fSBlZGl0b3JcclxuICAgICAqL1xyXG4gICAgb25Db21wbGV0ZSA9ICgpID0+IHtcclxuICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIG5vIHRlc3RzIHJhbiwgaW4gd2hpY2ggY2FzZSByZXN1bHRzIHdvbid0IGV4aXN0XHJcbiAgICAgICAgdGhpcy5ub1Rlc3RzID0gdGhpcy5yZXN1bHRzLnByb3BlcnRpZXMuZXZlcnkoeCA9PiAheC5wbHVnaW5zLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKHRoaXMubm9UZXN0cykge1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5tb2RlbC5iYWRnZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IHAgb2YgdGhpcy5yZXN1bHRzLnByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgcC5kaXNhYmxlZCA9IHAuZmFpbGVkQ291bnQgPT09IC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaG93U3VjY2Vzc01lc3NhZ2UgPSAhdGhpcy5yZXN1bHRzLmZhaWxlZCAmJiAhdGhpcy5ub1Rlc3RzO1xyXG4gICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XHJcbiAgICB9OyBcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBiYWRnZSBpbiB0aGUgaGVhZGVyIHdpdGggdGhlIG51bWJlciBvZiBmYWlsZWQgdGVzdHNcclxuICAgICAqL1xyXG4gICAgc2V0QmFkZ2VDb3VudCA9IHBlbmRpbmcgPT4ge1xyXG4gICAgICAgIGlmIChwZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLm1vZGVsLmJhZGdlID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdHMgJiYgdGhpcy5yZXN1bHRzLmZhaWxlZENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5tb2RlbC5iYWRnZSA9IHtcclxuICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnJlc3VsdHMuZmFpbGVkQ291bnQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYWxlcnQgLS1lcnJvci1iYWRnZSBwZi1ibG9jaydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS5tb2RlbC5iYWRnZSA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzIGljb24tJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaWYgbm9kZSBpcyBpbnZhcmlhbnQsIHNlbmQgbm8gY3VsdHVyZSwgb3RoZXJ3aXNlIGdldCBmcm9tIGxhbmd1YWdlLm5hbWUgb24gdGhlIGFjdGl2ZSB2YXJpYW50XHJcbiAgICAgKiAqL1xyXG4gICAgZ2V0Q3VycmVudEN1bHR1cmUgPSAoKSA9PiB0aGlzLmFjdGl2ZVZhcmlhbnQubGFuZ3VhZ2UgPyB0aGlzLmFjdGl2ZVZhcmlhbnQubGFuZ3VhZ2UuY3VsdHVyZSA6ICcnO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHByb3BlcnR5IHNldCB3aXRoIHRoZSBuZXcgdmFsdWUsIGFuZCByZW1vdmVzIGFueSB0ZW1wb3JhcnkgcHJvcGVydHkgZnJvbSB0aGF0IHNldFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBhIHJlc3BvbnNlIG1vZGVsIGl0ZW0gcmV0dXJuZWQgdmlhIHRoZSBzaWduYWxyIGh1YlxyXG4gICAgICovXHJcbiAgICByZWJpbmRSZXN1bHQgPSBkYXRhID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmxhYmVsLCBkYXRhKTtcclxuICAgICAgICBsZXQgbmV3UHJvcCA9IHRydWU7XHJcbiAgICAgICAgbGV0IHRvdGFsVGVzdHNSdW4gPSAwO1xyXG4gICAgICAgIGxldCBleGlzdGluZ1Byb3AgPSB0aGlzLnJlc3VsdHMucHJvcGVydGllcy5maW5kKHggPT4geC5sYWJlbCA9PT0gZGF0YS5sYWJlbCk7XHJcblxyXG4gICAgICAgIGlmIChleGlzdGluZ1Byb3ApIHtcclxuICAgICAgICAgICAgZXhpc3RpbmdQcm9wID0gT2JqZWN0LmFzc2lnbihleGlzdGluZ1Byb3AsIGRhdGEpO1xyXG4gICAgICAgICAgICBleGlzdGluZ1Byb3AubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBuZXdQcm9wID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhIG5ldyBwcm9wZXJ0eSB3aWxsIGhhdmUgYSB0ZW1wb3JhcnkgcGxhY2Vob2xkZXIgLSByZW1vdmUgaXRcclxuICAgICAgICAvLyBfdGVtcCBlbnN1cmVzIGdyaWQgd2l0aCBtdWx0aXBsZSBlZGl0b3JzIG9ubHkgcmVtb3ZlcyB0aGUgY29ycmVjdCB0ZW1wIGVudHJ5XHJcbiAgICAgICAgaWYgKG5ld1Byb3AgJiYgIWRhdGEucmVtb3ZlICYmIGRhdGEuZmFpbGVkQ291bnQgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBJbmRleCA9IHRoaXMucmVzdWx0cy5wcm9wZXJ0aWVzLmZpbmRJbmRleChwID0+IHAubmFtZSA9PT0gYCR7ZGF0YS5uYW1lfV90ZW1wYCk7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHMucHJvcGVydGllcy5zcGxpY2UodGVtcEluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMucHJvcGVydGllcy5wdXNoKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZXN1bHRzLnByb3BlcnRpZXMgPSB0aGlzLnJlc3VsdHMucHJvcGVydGllcy5maWx0ZXIoeCA9PiB4LnJlbW92ZSA9PT0gZmFsc2UpO1xyXG4gICAgICAgIHRoaXMucmVzdWx0cy5wcm9wZXJ0aWVzID0gdGhpcy5yZXN1bHRzLnByb3BlcnRpZXMuZmlsdGVyKHggPT4geC5mYWlsZWRDb3VudCA+IC0xKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXN1bHRzLmZhaWxlZENvdW50ID0gdGhpcy5yZXN1bHRzLnByb3BlcnRpZXMucmVkdWNlKChwcmV2LCBjdXIpID0+IHtcclxuICAgICAgICAgICAgdG90YWxUZXN0c1J1biArPSBjdXIudG90YWxUZXN0cztcclxuICAgICAgICAgICAgcmV0dXJuIHByZXYgKyBjdXIuZmFpbGVkQ291bnQ7XHJcbiAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzdWx0cy5mYWlsZWQgPSB0aGlzLnJlc3VsdHMuZmFpbGVkQ291bnQgPiAwO1xyXG4gICAgICAgIHRoaXMucHJvcHNCZWluZ0NoZWNrZWRTdHIgPSB0aGlzLmpvaW5MaXN0KHRoaXMucHJvcHNCZWluZ0NoZWNrZWQuc3BsaWNlKHRoaXMucHJvcHNCZWluZ0NoZWNrZWQuaW5kZXhPZihkYXRhLm5hbWUpLCAxKSk7XHJcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlRmFpbGVkID0gKHRvdGFsVGVzdHNSdW4gLSB0aGlzLnJlc3VsdHMuZmFpbGVkQ291bnQpIC8gdG90YWxUZXN0c1J1biAqIDEwMDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgZGlydHkgY29udGVudCBwcm9wZXJ0aWVzLCBjaGVja3MgdGhlIHR5cGUgYW5kIGJ1aWxkcyBhIGNvbGxlY3Rpb24gb2Ygc2ltcGxlIG1vZGVscyBmb3IgcG9zdGluZyB0byB0aGUgcHJlZmxpZ2h0IGNoZWNrZGlydHkgZW5kcG9pbnRcclxuICAgICAqIEFsc28gZ2VuZXJhdGVzIGFuZCBzdG9yZXMgYSBoYXNoIG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgY29tcGFyaXNvbiBvbiBzdWJzZXF1ZW50IGNhbGxzLCB0byBwcmV2ZW50IHJlLWZldGNoaW5nIHVuY2hhbmdlZCBkYXRhXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGlydHkgPSAoKSA9PiB7XHJcblxyXG4gICAgICAgIHRoaXMuZGlydHlQcm9wcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaGFzRGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcHJvcCBvZiB0aGlzLnByb3BlcnRpZXNUb1RyYWNrKSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFByb3BlcnR5KHByb3AuYWxpYXMpLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb3AuZWRpdG9yID09PSB0aGlzLmJsb2NrTGlzdEVkaXRvckFsaWFzKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50VmFsdWUuY29udGVudERhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gdGhpcy5qc29uUHJvcGVydGllcy5pbmNsdWRlcyhwcm9wLmVkaXRvcikgPyBKU09OLnN0cmluZ2lmeShjdXJyZW50VmFsdWUpIDogY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBoYXNoID0gdGhpcy5nZXRIYXNoKGN1cnJlbnRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXJ0eUhhc2hlc1twcm9wLmxhYmVsXSAmJiB0aGlzLmRpcnR5SGFzaGVzW3Byb3AubGFiZWxdICE9PSBoYXNoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eVByb3BzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3AubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1cnJlbnRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3I6IHByb3AuZWRpdG9yXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcnR5SGFzaGVzW3Byb3AubGFiZWxdID0gaGFzaDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmRpcnR5SGFzaGVzW3Byb3AubGFiZWxdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcnR5SGFzaGVzW3Byb3AubGFiZWxdID0gaGFzaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgZGlydHkgcHJvcGVydGllcyBleGlzdCwgY3JlYXRlIGEgc2ltcGxlIG1vZGVsIGZvciBlYWNoIGFuZCBzZW5kIHRoZSBsb3Qgb2ZmIGZvciBjaGVja2luZ1xyXG4gICAgICAgIC8vIHJlc3BvbnNlIGNvbWVzIHZpYSB0aGUgc2lnbmFsciBodWIgc28gaXMgbm90IGhhbmRsZWQgaGVyZVxyXG4gICAgICAgIGlmICh0aGlzLmhhc0RpcnR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHRpbWVvdXQoKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlQcm9wcy5mb3JFYWNoKHByb3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGV4aXN0aW5nIG9mIHRoaXMucmVzdWx0cy5wcm9wZXJ0aWVzLmZpbHRlcihwID0+IHAubmFtZSA9PT0gcHJvcC5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLm9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmZhaWxlZENvdW50ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSBuZXcgcGxhY2Vob2xkZXIgZm9yIHBlbmRpbmcgcmVzdWx0cyAtIHRoaXMgaXMgcmVtb3ZlZCB3aGVuIHRoZSByZXNwb25zZSBpcyByZXR1cm5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzLnByb3BlcnRpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3AubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZENvdW50OiAtMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHtwcm9wLm5hbWV9X3RlbXBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wc0JlaW5nQ2hlY2tlZC5wdXNoKHByb3AubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzQmVpbmdDaGVja2VkU3RyID0gdGhpcy5qb2luTGlzdCh0aGlzLnByb3BzQmVpbmdDaGVja2VkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHRoaXMuZGlydHlQcm9wcyxcclxuICAgICAgICAgICAgICAgICAgICBjdWx0dXJlOiB0aGlzLmdldEN1cnJlbnRDdWx0dXJlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuZWRpdG9yU3RhdGUuY3VycmVudC5pZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJhZGdlQ291bnQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZWZsaWdodFNlcnZpY2UuY2hlY2tEaXJ0eShwYXlsb2FkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYXRlcyB0aGUgc2lnbmFsciBodWIgZm9yIHJldHVybmluZyB0ZXN0IHJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgaW5pdFNpZ25hbFIgPSAoKSA9PiB7XHJcblxyXG4gICAgICAgIHRoaXMucHJlZmxpZ2h0SHViLmluaXRIdWIoaHViID0+IHtcclxuXHJcbiAgICAgICAgICAgIGh1Yi5vbigncHJlZmxpZ2h0VGVzdCcsXHJcbiAgICAgICAgICAgICAgICBlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYmluZFJlc3VsdChlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJhZGdlQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaHViLm9uKCdwcmVmbGlnaHRDb21wbGV0ZScsXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLm9uQ29tcGxldGUoKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaHViLnN0YXJ0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogQ2hlY2sgYWxsIHByb3BlcnRpZXMgd2hlbiB0aGUgY29udHJvbGxlciBsb2Fkcy4gV29uJ3QgcmUtcnVuIHdoZW4gY2hhbmdpbmcgYmV0d2VlbiBhcHBzXHJcbiAgICAgICAgICAgICAgICAgKiBidXQgbmVlZHMgdG8gaGFwcGVuIGFmdGVyIHRoZSBodWIgbG9hZHNcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCYWRnZUNvdW50KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tEaXJ0eSgpOyAvLyBidWlsZHMgaW5pdGlhbCBoYXNoIGFycmF5LCBidXQgd29uJ3QgcnVuIGFueXRoaW5nICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWZsaWdodFNlcnZpY2UuY2hlY2sodGhpcy5lZGl0b3JTdGF0ZS5jdXJyZW50LmlkLCB0aGlzLmdldEN1cnJlbnRDdWx0dXJlKCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICRvbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVWYXJpYW50ID0gdGhpcy5lZGl0b3JTdGF0ZS5jdXJyZW50LnZhcmlhbnRzLmZpbmQoeCA9PiB4LmFjdGl2ZSk7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzVG9UcmFjayA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVWYXJpYW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVmFyaWFudC50YWJzLmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnRpZXNUb1RyYWNrID0gdGhpcy5wcm9wZXJ0aWVzVG9UcmFjay5jb25jYXQoeC5wcm9wZXJ0aWVzLm1hcCh4ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWxpZFByb3BUeXBlcy5pbmNsdWRlcyh4LmVkaXRvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvcjogeC5lZGl0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlhczogeC5hbGlhcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB4LmxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpLmZpbHRlcih4ID0+IHgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFycmF5IHdpbGwgaGF2ZSBsZW5ndGgsIGFzIGFwcCBpcyBvbmx5IHNlbnQgb24gdHlwZXMgd2l0aCB0ZXN0YWJsZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXNUb1RyYWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0U2lnbmFsUigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIu+7v2ltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NDb250cm9sbGVyIHtcclxuXHJcbiAgICBzdGF0aWMgY29udHJvbGxlck5hbWUgPSAncHJlZmxpZ2h0LnNldHRpbmdzLmNvbnRyb2xsZXInO1xyXG5cclxuICAgICRzY29wZTtcclxuICAgICRxO1xyXG4gICAgbGFuZ3VhZ2VSZXNvdXJjZTtcclxuICAgIG5vdGlmaWNhdGlvbnNTZXJ2aWNlO1xyXG4gICAgcHJlZmxpZ2h0U2VydmljZTtcclxuXHJcbiAgICBsYW5ndWFnZXMgPSBbXTtcclxuICAgIHRhYnMgPSBbXTtcclxuICAgIHNldHRpbmdzID0gW107XHJcbiAgICBjdXJyZW50TGFuZ3VhZ2U7XHJcblxyXG4gICAgbGFuZ3VhZ2VDaGFuZ2VXYXRjaGVyO1xyXG4gICAgdGVzdGFibGVQcm9wZXJ0aWVzV2F0Y2hlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGUsICRxLCBub3RpZmljYXRpb25zU2VydmljZSwgbGFuZ3VhZ2VSZXNvdXJjZSwgcHJlZmxpZ2h0U2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJHEgPSAkcTtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnNTZXJ2aWNlID0gbm90aWZpY2F0aW9uc1NlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5wcmVmbGlnaHRTZXJ2aWNlID0gcHJlZmxpZ2h0U2VydmljZTtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlUmVzb3VyY2UgPSBsYW5ndWFnZVJlc291cmNlO1xyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ2hhbmdlV2F0Y2hlciA9ICRzY29wZS4kd2F0Y2goKCkgPT4gdGhpcy5jdXJyZW50TGFuZ3VhZ2UsIChuZXdMYW5nLCBvbGRMYW5nKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzZXR0aW5ncyB0byBvbmx5IGluY2x1ZGUgdGhlIGN1cnJlbnQgdmFyaWFudFxyXG4gICAgICAgICAgICBpZiAobmV3TGFuZyAmJiBuZXdMYW5nICE9PSBvbGRMYW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3luY1NldHRpbmcgPSB0aGlzLnNldHRpbmdzU3luY01vZGVsLmZpbmQoeCA9PiB4LmFsaWFzID09PSBzLmFsaWFzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFuYWdlIG9sZCBsYW5ndWFnZSBieSB1cGRhdGluZyB0aGUgc3luYyBzZXR0aW5ncyBtb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmluZyB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZExhbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzeW5jU2V0dGluZy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3luY1NldHRpbmcudmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzeW5jU2V0dGluZy52YWx1ZVtvbGRMYW5nXSA9IHMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHZhbHVlIGZvciB0aGUgbmV3IGxhbmd1YWdlIGFuZCB1cGRhdGUgdGhlIHNldHRpbmdzIG1vZGVsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN5bmNTZXR0aW5nLnZhbHVlICYmIHN5bmNTZXR0aW5nLnZhbHVlW25ld0xhbmddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgPSBzeW5jU2V0dGluZy52YWx1ZVtuZXdMYW5nXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIHRvIGEgc2Vuc2libGUgZGVmYXVsdCAtIGFycmF5IGlmIHR5cGUgaXMgY2hlY2tib3hsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgPSBzLnZpZXcuaW5jbHVkZXMoY29uc3RhbnRzLmNoZWNrYm94bGlzdCkgfHwgcy52aWV3LmluY2x1ZGVzKGNvbnN0YW50cy5tdWx0aXBsZXRleHRib3gpID8gW10gOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgd2F0Y2hUZXN0YWJsZVByb3BlcnRpZXMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy50ZXN0YWJsZVByb3BlcnRpZXNXYXRjaGVyID0gdGhpcy4kc2NvcGUuJHdhdGNoKCgpID0+IHRoaXMuc2V0dGluZ3MuZmluZCh4ID0+IHguYWxpYXMgPT09ICdwcm9wZXJ0aWVzVG9UZXN0JykudmFsdWUsIG5ld1ZhbCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwcm9wZXJ0aWVzVG9Nb2RpZnkgPSB0aGlzLnNldHRpbmdzLmZpbHRlcih4ID0+IHguYWxpYXMuaW5jbHVkZXMoJ1Byb3BlcnRpZXNUb1Rlc3QnKSAmJiB4LmFsaWFzICE9PSAncHJvcGVydGllc1RvVGVzdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHByb3Agb2YgcHJvcGVydGllc1RvTW9kaWZ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHRoZSBwcm9wIGFsaWFzIHRvIGZpbmQgdGhlIGNoZWNrYm94IHNldFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNoZWNrYm94IG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYHVtYi1jaGVja2JveFtuYW1lKj1cIiR7cHJvcC5hbGlhc31cIl1gKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5xdWVyeVNlbGVjdG9yKCcudW1iLWZvcm0tY2hlY2snKS5jbGFzc0xpc3RbbmV3VmFsLmluZGV4T2YoY2hlY2tib3guZ2V0QXR0cmlidXRlKCd2YWx1ZScpKSA9PT0gLTEgPyAnYWRkJyA6ICdyZW1vdmUnXSgncGYtZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgJG9uRGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ2hhbmdlV2F0Y2hlcigpO1xyXG4gICAgICAgIHRoaXMudGVzdGFibGVQcm9wZXJ0aWVzV2F0Y2hlcigpO1xyXG4gICAgfVxyXG5cclxuICAgICRvbkluaXQoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXHJcbiAgICAgICAgICAgIHRoaXMucHJlZmxpZ2h0U2VydmljZS5nZXRTZXR0aW5ncygpLFxyXG4gICAgICAgICAgICB0aGlzLmxhbmd1YWdlUmVzb3VyY2UuZ2V0QWxsKCksXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdGhpcy4kcS5hbGwocHJvbWlzZXMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc1N5bmNNb2RlbCA9IHJlc3BbMF0uZGF0YS5zZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc2V0dGluZ3NTeW5jTW9kZWwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnMgPSByZXNwWzBdLmRhdGEudGFicztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhbmd1YWdlcyA9IHJlc3BbMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB0aGlzLmxhbmd1YWdlcy5maW5kKHggPT4geC5pc0RlZmF1bHQpLmN1bHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc1N5bmNNb2RlbC5mb3JFYWNoKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2LnZpZXcuaW5jbHVkZXMoY29uc3RhbnRzLm11bHRpcGxldGV4dGJveCkgJiYgdi52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModi52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYudmFsdWVba2V5XSA9IHZhbHVlLnNwbGl0KCcsJykubWFwKHZhbCA9PiAoeyB2YWx1ZTogdmFsIH0pKS5zb3J0KChhLCBiKSA9PiBhIDwgYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHYudmlldy5pbmNsdWRlcyhjb25zdGFudHMuY2hlY2tib3hsaXN0KSAmJiB2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi52YWx1ZVtrZXldID0gdmFsdWUuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5mb3JFYWNoKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN5bmNTZXR0aW5nID0gdGhpcy5zZXR0aW5nc1N5bmNNb2RlbC5maW5kKHggPT4geC5hbGlhcyA9PT0gdi5hbGlhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdi52YWx1ZSA9IHN5bmNTZXR0aW5nLnZhbHVlID8gc3luY1NldHRpbmcudmFsdWVbY3VycmVudExhbmd1YWdlXSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2LnZpZXcuaW5jbHVkZXMoJ3NsaWRlcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlOiAncm91bmQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZhbDE6IHYuYWxpYXMgPT09ICdsb25nV29yZFN5bGxhYmxlcycgPyA1IDogNjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhWYWw6IHYuYWxpYXMgPT09ICdsb25nV29yZFN5bGxhYmxlcycgPyAxMCA6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblZhbDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ2Fsd2F5cycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwUG9zaXRpb246ICdib3R0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodi52aWV3LmluY2x1ZGVzKGNvbnN0YW50cy5tdWx0aXBsZXRleHRib3gpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYudmFsaWRhdGlvbiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodi52aWV3LmluY2x1ZGVzKGNvbnN0YW50cy5jaGVja2JveGxpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHYucHJldmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TGFuZ3VhZ2UgPSBjdXJyZW50TGFuZ3VhZ2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndhdGNoVGVzdGFibGVQcm9wZXJ0aWVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIHNhdmVTZXR0aW5ncyA9ICgpID0+IHtcclxuXHJcbiAgICAgICAgLy8gZW5zdXJlIHRoZSBjdXJyZW50IGxhbmd1YWdlIGlzIGNvcnJlY3RseSBtYXBwZWQgdG8gdGhlIHN5bmMgbW9kZWxcclxuICAgICAgICB0aGlzLnNldHRpbmdzLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN5bmNTZXR0aW5nID0gdGhpcy5zZXR0aW5nc1N5bmNNb2RlbC5maW5kKHggPT4geC5hbGlhcyA9PT0gcy5hbGlhcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXN5bmNTZXR0aW5nLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBzeW5jU2V0dGluZy52YWx1ZSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzeW5jU2V0dGluZy52YWx1ZVt0aGlzLmN1cnJlbnRMYW5ndWFnZV0gPSBzLnZhbHVlID8gcy52YWx1ZSA6XHJcbiAgICAgICAgICAgICAgICBzLnZpZXcuaW5jbHVkZXMoY29uc3RhbnRzLmNoZWNrYm94bGlzdCkgfHwgcy52aWV3LmluY2x1ZGVzKGNvbnN0YW50cy5tdWx0aXBsZXRleHRib3gpID8gW10gOiBudWxsOyAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBlbnN1cmUgcmVhZGFiaWxpdHkgaXMgdmFsaWRcclxuICAgICAgICBsZXQgdmFsaWRSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZXMuZm9yRWFjaChsID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VsdHVyZSA9IGwuY3VsdHVyZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1pbiA9IHBhcnNlSW50KHRoaXMuc2V0dGluZ3NTeW5jTW9kZWwuZmluZCh4ID0+IHguYWxpYXMgPT09ICdyZWFkYWJpbGl0eVRhcmdldE1pbmltdW0nKS52YWx1ZVtjdWx0dXJlXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KHRoaXMuc2V0dGluZ3NTeW5jTW9kZWwuZmluZCh4ID0+IHguYWxpYXMgPT09ICdyZWFkYWJpbGl0eVRhcmdldE1heGltdW0nKS52YWx1ZVtjdWx0dXJlXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobWluID4gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnNTZXJ2aWNlLmVycm9yKCdFUlJPUicsXHJcbiAgICAgICAgICAgICAgICAgICAgYFVuYWJsZSB0byBzYXZlIHNldHRpbmdzIC0gcmVhZGFiaWxpdHkgbWluaW11bSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIHJlYWRhYmlsaXR5IG1heGltdW0gKCR7bC5uYW1lfSlgKTtcclxuICAgICAgICAgICAgICAgIHZhbGlkUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtaW4gKyAxMCA+IG1heCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zU2VydmljZS53YXJuaW5nKCdXQVJOSU5HJywgYFJlYWRhYmlsaXR5IHJhbmdlIGlzIG5hcnJvdyAoJHtsLm5hbWV9KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh2YWxpZFJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gdHJhbnNmb3JtIG11bHRpdGV4dGJveCB2YWx1ZXMgd2l0aG91dCBkaWdlc3RcclxuICAgICAgICAgICAgLy8gc28gbXVzdCBiZSBhIG5ldyBvYmplY3QsIG5vdCBhIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nc1RvU2F2ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR0aW5nc1N5bmNNb2RlbCkpO1xyXG5cclxuICAgICAgICAgICAgc2V0dGluZ3NUb1NhdmUuZm9yRWFjaCh2ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh2LnZpZXcuaW5jbHVkZXMoY29uc3RhbnRzLm11bHRpcGxldGV4dGJveCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModi52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdi52YWx1ZVtrZXldID0gdmFsdWUubWFwKG8gPT4gby52YWx1ZSkuam9pbignLCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodi52aWV3LmluY2x1ZGVzKGNvbnN0YW50cy5jaGVja2JveGxpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHYudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYudmFsdWVba2V5XSA9IHZhbHVlLmpvaW4oJywnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcmVmbGlnaHRTZXJ2aWNlLnNhdmVTZXR0aW5ncyhzZXR0aW5nc1RvU2F2ZSwgdGhpcy50YWJzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcC5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5ub3RpZmljYXRpb25zU2VydmljZS5zdWNjZXNzKCdTVUNDRVNTJywgJ1NldHRpbmdzIHVwZGF0ZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMubm90aWZpY2F0aW9uc1NlcnZpY2UuZXJyb3IoJ0VSUk9SJywgJ1VuYWJsZSB0byBzYXZlIHNldHRpbmdzJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGRhc2hib2FyZCBmb3JtIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUucHJlZmxpZ2h0U2V0dGluZ3NGb3JtLiRzZXRQcmlzdGluZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Iiwi77u/KCgpID0+IHtcclxuXHJcbiAgICBjb25zdCBwb3N0U2F2ZVVybCA9ICcvdW1icmFjb2FwaS9jb250ZW50L3Bvc3RzYXZlJztcclxuICAgIGxldCBwcmVzYXZlVGV4dDtcclxuXHJcbiAgICBmdW5jdGlvbiBpbnRlcmNlcHRvcihub3RpZmljYXRpb25zU2VydmljZSwgb3ZlcmxheVNlcnZpY2UsIGVkaXRvclN0YXRlLCAkcm9vdFNjb3BlLCAkcSwgJGluamVjdG9yKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoZWNrR3JvdXAgPSAodXNlckdyb3VwT3B0SW5PdXQsIGN1bHR1cmUpID0+IHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdXNlckdyb3VwT3B0SW5PdXQudmFsdWVbY3VsdHVyZV07XHJcbiAgICAgICAgICAgIHZhciBlbmFibGVkR3JvdXBzID0gdXNlckdyb3VwT3B0SW5PdXQucHJldmFsdWVzLmZpbHRlcih4ID0+IHZhbHVlLmluY2x1ZGVzKHgudmFsdWUpKS5tYXAoeCA9PiB4LmtleSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbG9jYWxpemF0aW9uU2VydmljZTtcclxuICAgICAgICAgICAgJGluamVjdG9yLmludm9rZShbJ2xvY2FsaXphdGlvblNlcnZpY2UnLCBzZXJ2aWNlID0+IGxvY2FsaXphdGlvblNlcnZpY2UgPSBzZXJ2aWNlXSk7XHJcblxyXG4gICAgICAgICAgICAkaW5qZWN0b3IuaW52b2tlKFsnYXV0aFJlc291cmNlJywgYXV0aFJlc291cmNlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhSZXNvdXJjZS5nZXRDdXJyZW50VXNlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsaXphdGlvblNlcnZpY2UubG9jYWxpemUoJ3ByZWZsaWdodF9wcmVzYXZlVGV4dCcpLFxyXG4gICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAkcS5hbGwocHJvbWlzZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVzcFswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2F2ZVRleHQgPSByZXNwWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZWRHcm91cHMuc29tZSh4ID0+IGN1cnJlbnRVc2VyLnVzZXJHcm91cHMuaW5jbHVkZXMoeCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zU2VydmljZS5pbmZvKCdQcmVmbGlnaHQnLCBwcmVzYXZlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3QgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QudXJsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocG9zdFNhdmVVcmwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGluamVjdG9yLmludm9rZShbJ3ByZWZsaWdodFNlcnZpY2UnLCBzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcy5nZXRTZXR0aW5ncygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHJlc3AuZGF0YS5zZXR0aW5ncztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgdmFsdWVzIGFyZSBhIGRpY3Rpb25hcnkga2V5ZWQgYnkgY3VsdHVyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhbnRzVG9TYXZlID0gcmVxdWVzdC5kYXRhLnZhbHVlLnZhcmlhbnRzLmZpbHRlcih2ID0+IHYuc2F2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZmxpZ2h0VmFycyA9IFVtYnJhY28uU3lzLlNlcnZlclZhcmlhYmxlcy5QcmVmbGlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnRzVG9TYXZlLmZvckVhY2godmFyaWFudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1bHR1cmUgPSB2YXJpYW50Lmxhbmd1YWdlID8gdmFyaWFudC5sYW5ndWFnZS5jdWx0dXJlIDogcHJlZmxpZ2h0VmFycy5EZWZhdWx0Q3VsdHVyZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnVuT25TYXZlID0gc2V0dGluZ3MuZmluZCh4ID0+IHguZ3VpZCA9PT0gcHJlZmxpZ2h0VmFycy5TZXR0aW5nc0d1aWQuQmluZFNhdmVIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5PblNhdmUgJiYgcnVuT25TYXZlLnZhbHVlW2N1bHR1cmVdID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJHcm91cE9wdEluT3V0ID0gc2V0dGluZ3MuZmluZCh4ID0+IHguZ3VpZCA9PT0gcHJlZmxpZ2h0VmFycy5TZXR0aW5nc0d1aWQuVXNlckdyb3VwT3B0SW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tHcm91cCh1c2VyR3JvdXBPcHRJbk91dCwgY3VsdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdCB8fCAkcS53aGVuKHJlcXVlc3QpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29uZmlnLnVybC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBvc3RTYXZlVXJsKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zU2VydmljZS5jdXJyZW50LmZpbmRJbmRleCh4ID0+IHgubWVzc2FnZSA9PT0gcHJlc2F2ZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBub3RpZmljYXRpb25zU2VydmljZS5yZW1vdmUoaW5kZXgpLCAxNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubm90aWZpY2F0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHJlc3BvbnNlLmRhdGEubm90aWZpY2F0aW9ucy5maWx0ZXIoZiA9PiBmLmhlYWRlciA9PT0gVW1icmFjby5TeXMuU2VydmVyVmFyaWFibGVzLlByZWZsaWdodC5Db250ZW50RmFpbGVkQ2hlY2tzKVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5ub3RpZmljYXRpb25zID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXlTZXJ2aWNlLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBgJHtVbWJyYWNvLlN5cy5TZXJ2ZXJWYXJpYWJsZXMuUHJlZmxpZ2h0LlBsdWdpblBhdGh9L3ZpZXdzL2ZhaWxlZC5ub3RpZmljYXRpb24uaHRtbGAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbkxhYmVsS2V5OiAncHJlZmxpZ2h0X3JldmlldycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVIZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVDYW5jZWxsZWQ6IG5vdGlmaWNhdGlvbi5tZXNzYWdlLmluY2x1ZGVzKCdfVHJ1ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ3Nob3dQcmVmbGlnaHQnLCB7IG5vZGVJZDogZWRpdG9yU3RhdGUuY3VycmVudC5pZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXlTZXJ2aWNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlOiAoKSA9PiBvdmVybGF5U2VydmljZS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3ByZWZsaWdodCcpXHJcbiAgICAgICAgLmZhY3RvcnkoJ3ByZWZsaWdodC5zYXZlLmludGVyY2VwdG9yJywgWydub3RpZmljYXRpb25zU2VydmljZScsICdvdmVybGF5U2VydmljZScsICdlZGl0b3JTdGF0ZScsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbmplY3RvcicsIGludGVyY2VwdG9yXSlcclxuICAgICAgICAuY29uZmlnKCRodHRwUHJvdmlkZXIgPT4gJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgncHJlZmxpZ2h0LnNhdmUuaW50ZXJjZXB0b3InKSk7XHJcblxyXG59KSgpOyIsIu+7v2ltcG9ydCB7IExpbmtIZWFsdGhSZXN1bHRDb21wb25lbnQgfSBmcm9tICcuL2xpbmtoZWFsdGgvbGlua2hlYWx0aC5yZXN1bHQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgUmVhZGFiaWxpdHlQbHVnaW5Db250cm9sbGVyIH0gZnJvbSAnLi9yZWFkYWJpbGl0eS9yZWFkYWJpbGl0eS5wbHVnaW4uY29udHJvbGxlcic7XHJcblxyXG5leHBvcnQgY29uc3QgUGx1Z2luc01vZHVsZSA9IGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3ByZWZsaWdodC5wbHVnaW5zJywgW10pXHJcbiAgICAuY29tcG9uZW50KExpbmtIZWFsdGhSZXN1bHRDb21wb25lbnQubmFtZSwgTGlua0hlYWx0aFJlc3VsdENvbXBvbmVudClcclxuICAgIC5jb250cm9sbGVyKFJlYWRhYmlsaXR5UGx1Z2luQ29udHJvbGxlci5jb250cm9sbGVyTmFtZSwgUmVhZGFiaWxpdHlQbHVnaW5Db250cm9sbGVyKVxyXG4gICAgLm5hbWU7Iiwi77u/ZXhwb3J0IGNvbnN0IExpbmtIZWFsdGhSZXN1bHRDb21wb25lbnQgPSB7XHJcbiAgICBuYW1lOiAnbGlua0hlYWx0aFJlc3VsdCcsXHJcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICByZXN1bHRzOiAnPCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cImxpbmtoZWFsdGgtcmVzdWx0LXRhYmxlXCI+XHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgIDx0cj48dGg+TGluayB0ZXh0PC90aD4gPHRoPkxpbmsgdGFyZ2V0PC90aD4gPHRoPkxpbmsgc3RhdHVzPC90aD48L3RyPlxyXG4gICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwibGluayBpbiAkY3RybC5yZXN1bHRzXCI+PHRkIG5nLWJpbmQ9XCJsaW5rLnRleHRcIj48L3RkPjx0ZCBuZy1iaW5kPVwibGluay5ocmVmXCI+PC90ZD48dGQgbmctYmluZD1cImxpbmsuc3RhdHVzXCI+PC90ZD48L3RyPlxyXG4gICAgICAgIDwvdGFibGU+YFxyXG59Iiwi77u/ZXhwb3J0IGNsYXNzIFJlYWRhYmlsaXR5UGx1Z2luQ29udHJvbGxlciB7XHJcblxyXG4gICAgc3RhdGljIGNvbnRyb2xsZXJOYW1lID0gJ3JlYWRhYmlsaXR5LnBsdWdpbi5jb250cm9sbGVyJztcclxuXHJcbiAgICAkc2NvcGU7XHJcbiAgICBlZGl0b3JTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCRzY29wZSwgZWRpdG9yU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuZWRpdG9yU2VydmljZSA9IGVkaXRvclNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgaGVscCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBoZWxwT3ZlcmxheSA9IHtcclxuICAgICAgICAgICAgdmlldzogYCR7VW1icmFjby5TeXMuU2VydmVyVmFyaWFibGVzLlByZWZsaWdodC5QbHVnaW5QYXRofS9wbHVnaW5zL3JlYWRhYmlsaXR5L3JlYWRhYmlsaXR5Lm92ZXJsYXkuaHRtbGAsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnUmVhZGFiaWxpdHknLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1doeSBzaG91bGQgSSBjYXJlPycsXHJcbiAgICAgICAgICAgIHNpemU6ICdzbWFsbCcsXHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuJHNjb3BlLm1vZGVsLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBjbG9zZTogKCkgPT4gdGhpcy5lZGl0b3JTZXJ2aWNlLmNsb3NlKCkgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5lZGl0b3JTZXJ2aWNlLm9wZW4oaGVscE92ZXJsYXkpO1xyXG4gICAgfTtcclxufVxyXG4iLCLvu79pbXBvcnQgeyBQcmVmbGlnaHRTZXJ2aWNlIH0gZnJvbSAnLi9wcmVmbGlnaHQuc2VydmljZSc7XHJcbmltcG9ydCB7IFByZWZsaWdodEh1YiB9IGZyb20gJy4vcHJlZmxpZ2h0Lmh1Yic7XHJcblxyXG5leHBvcnQgY29uc3QgU2VydmljZXNNb2R1bGUgPSBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdwcmVmbGlnaHQuc2VydmljZXMnLCBbXSlcclxuICAgIC5zZXJ2aWNlKFByZWZsaWdodFNlcnZpY2Uuc2VydmljZU5hbWUsIFByZWZsaWdodFNlcnZpY2UpXHJcbiAgICAuc2VydmljZShQcmVmbGlnaHRIdWIuc2VydmljZU5hbWUsIFByZWZsaWdodEh1YilcclxuICAgIC5uYW1lOyIsIu+7v2V4cG9ydCBjbGFzcyBQcmVmbGlnaHRIdWIge1xyXG5cclxuICAgIHN0YXRpYyBzZXJ2aWNlTmFtZSA9ICdwcmVmbGlnaHRIdWInO1xyXG5cclxuICAgICRyb290U2NvcGU7XHJcbiAgICAkcTtcclxuICAgIGFzc2V0c1NlcnZpY2U7XHJcblxyXG4gICAgc2NyaXB0cyA9IFtdO1xyXG4gICAgY2FsbGJhY2tzID0gW107XHJcblxyXG4gICAgc3RhcnRpbmcgPSBmYWxzZVxyXG4gICAgcGxhdGZvcm0gPSBVbWJyYWNvLlN5cy5TZXJ2ZXJWYXJpYWJsZXMuUHJlZmxpZ2h0LlBsYXRmb3JtO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCRyb290U2NvcGUsICRxLCBhc3NldHNTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICB0aGlzLiRxID0gJHE7XHJcbiAgICAgICAgdGhpcy5hc3NldHNTZXJ2aWNlID0gYXNzZXRzU2VydmljZTtcclxuXHJcbiAgICAgICAgY29uc3QgdW1icmFjb1BhdGggPSBVbWJyYWNvLlN5cy5TZXJ2ZXJWYXJpYWJsZXMudW1icmFjb1NldHRpbmdzLnVtYnJhY29QYXRoO1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXRmb3JtID09PSAnQ09SRScpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JpcHRzID0gW3VtYnJhY29QYXRoICsgJy9saWIvc2lnbmFsci9zaWduYWxyLm1pbi5qcyddO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0cyA9IFtcclxuICAgICAgICAgICAgICAgIHVtYnJhY29QYXRoICsgJy9saWIvc2lnbmFsci9qcXVlcnkuc2lnbmFsci5qcycsXHJcbiAgICAgICAgICAgICAgICB1bWJyYWNvUGF0aCArICcvYmFja29mZmljZS9zaWduYWxyL2h1YnMnXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldHVwSHViID0gY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBwcm94eTtcclxuICAgICAgICBsZXQgaHViID0ge307XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsYXRmb3JtID09PSAnQ09SRScpIHtcclxuICAgICAgICAgICAgJC5jb25uZWN0aW9uID0gbmV3IHNpZ25hbFIuSHViQ29ubmVjdGlvbkJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgLndpdGhVcmwoVW1icmFjby5TeXMuU2VydmVyVmFyaWFibGVzLlByZWZsaWdodC5zaWduYWxSSHViKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBdXRvbWF0aWNSZWNvbm5lY3QoKVxyXG4gICAgICAgICAgICAgICAgLmNvbmZpZ3VyZUxvZ2dpbmcoc2lnbmFsUi5Mb2dMZXZlbC5XYXJuaW5nKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcblxyXG4gICAgICAgICAgICBwcm94eSA9ICQuY29ubmVjdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHByb3h5ID0gJC5jb25uZWN0aW9uLnByZWZsaWdodEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcm94eSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGh1YiA9IHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBjYWxsYmFjayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0gPT09ICdDT1JFJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHkuc3RhcnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGNhbGxiYWNrID8gY2FsbGJhY2soKSA6IHt9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzdGFydCBodWInKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IHNldHVwIHNpZ25hbFIgY29ubmVjdGlvbicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5jb25uZWN0aW9uLmh1Yi5zdGF0ZSAhPT0gJC5jb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZS5kaXNjb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuY29ubmVjdGlvbi5odWIuc3RvcCh0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmNvbm5lY3Rpb24uaHViLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID8gY2FsbGJhY2soKSA6IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbjogKGV2ZW50TmFtZSwgY2FsbGJhY2spID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwcm94eS5vbihldmVudE5hbWUsIHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaHViID0ge1xyXG4gICAgICAgICAgICAgICAgb246ICgpID0+IHsgfSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiAoKSA9PiBjb25zb2xlLndhcm4oJ05vIGh1YiB0byBzdGFydCcpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2soaHViKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiBpcyBjb21tb24gYWNyb3NzIDQ3MiBhbmQgNS4wXHJcbiAgICAgKiAqL1xyXG4gICAgcHJvY2Vzc0NhbGxiYWNrcygpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5jYWxsYmFja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNiID0gdGhpcy5jYWxsYmFja3MucG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBIdWIoY2IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdGFydGluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRnVuY3Rpb24gaXMgY29tbW9uIGFjcm9zcyA0NzIgYW5kIDUuMCBcclxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBpbml0SHViKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zdGFydGluZykge1xyXG4gICAgICAgICAgICBpZiAoJC5jb25uZWN0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcmlwdHMuZm9yRWFjaChzY3JpcHQgPT4gcHJvbWlzZXMucHVzaCh0aGlzLmFzc2V0c1NlcnZpY2UubG9hZEpzKHNjcmlwdCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLiRxLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB0aGlzLnByb2Nlc3NDYWxsYmFja3MoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDYWxsYmFja3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIu+7v2V4cG9ydCBjbGFzcyBQcmVmbGlnaHRTZXJ2aWNlIHtcclxuXHJcbiAgICBzdGF0aWMgc2VydmljZU5hbWUgPSAncHJlZmxpZ2h0U2VydmljZSc7XHJcblxyXG4gICAgJGh0dHA7XHJcbiAgICB1bWJSZXF1ZXN0SGVscGVyO1xyXG5cclxuICAgIHVybEJhc2UgPSBVbWJyYWNvLlN5cy5TZXJ2ZXJWYXJpYWJsZXMuUHJlZmxpZ2h0LkFwaVBhdGg7XHJcblxyXG4gICAgc3RhdGljIGhlbHBUZXh0ID0gYFxyXG4gICAgICAgIDxwPklmIHlvdXIgY29udGVudCBpcyB0b28gZGlmZmljdWx0IGZvciB5b3VyIHZpc2l0b3JzIHRvIHJlYWQsIHlvdSdyZSBhbGwgZ29pbmcgdG8gaGF2ZSBhIGJhZCB0aW1lLjwvcD5cclxuICAgICAgICA8cD5UaGUgcmVhZGFiaWxpdHkgdGVzdCBydW5zIHlvdXIgY29udGVudCB0aHJvdWdoIHRoZSBGbGVzY2ggcmVhZGluZyBlYXNlIGFsZ29yaXRobSB0byBkZXRlcm1pbmUgdGV4dCBjb21wbGV4aXR5LjwvcD5cclxuICAgICAgICA8aDU+VGhlIGFsZ29yaXRobTwvaDU+XHJcbiAgICAgICAgPHA+PGNvZGU+UkUgPSAyMDYuODM1IC0gKDEuMDE1IHggQVNMKSAtICg4NC42IHggQVNXKTwvY29kZT48L3A+XHJcbiAgICAgICAgPHA+V2hlcmUgPGNvZGU+UkU8L2NvZGU+IGlzIFJlYWRhYmlsaXR5IEVhc2UsIDxjb2RlPkFTTDwvY29kZT4gaXMgQXZlcmFnZSBTZW50ZW5jZSBMZW5ndGgsIGFuZCA8Y29kZT5BU1c8L2NvZGU+IGlzIEF2ZXJhZ2UgU3lsbGFibGVzIHBlciBXb3JkPC9wPlxyXG4gICAgICAgIDxwPlRoZSByZXN1bHQgaXMgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDAsIHdoZXJlIGEgaGlnaGVyIHNjb3JlIG1lYW5zIGJldHRlciByZWFkYWJpbGl0eSwgd2l0aCBhIHNjb3JlIGJldHdlZW4gNjAgYW5kIDY5IGxhcmdlbHkgY29uc2lkZXJlZCBhY2NlcHRhYmxlLjwvcD5cclxuICAgICAgICA8aDU+UmVhZGFiaWxpdHkgdGVzdCByZXN1bHRzPC9oNT5cclxuICAgICAgICA8cD5BcyB3ZWxsIGFzIHRoZSBGbGVzY2ggc2NvcmUsIHRoZSByZWFkYWJpbGl0eSB0ZXN0IHJldHVybnMgc2VudGVuY2UgbGVuZ3RoOyBhdmVyYWdlIHN5bGxhYmxlcyBwZXIgd29yZDsgYW5kIGxvbmcgb3IgY29tcGxleCB3b3Jkczs8L3A+YDtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoJGh0dHAsIHVtYlJlcXVlc3RIZWxwZXIpIHtcclxuICAgICAgICB0aGlzLiRodHRwID0gJGh0dHA7XHJcbiAgICAgICAgdGhpcy51bWJSZXF1ZXN0SGVscGVyID0gdW1iUmVxdWVzdEhlbHBlcjtcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0ID0gKG1ldGhvZCwgdXJsLCBkYXRhKSA9PlxyXG4gICAgICAgIHRoaXMudW1iUmVxdWVzdEhlbHBlci5yZXNvdXJjZVByb21pc2UoXHJcbiAgICAgICAgICAgIG1ldGhvZCA9PT0gJ0dFVCcgPyB0aGlzLiRodHRwLmdldCh0aGlzLnVybEJhc2UgKyB1cmwpIDogdGhpcy4kaHR0cC5wb3N0KHRoaXMudXJsQmFzZSArIHVybCwgZGF0YSksXHJcbiAgICAgICAgICAgICdTb21ldGhpbmcgYnJva2UnXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBjaGVjayA9IChpZCwgY3VsdHVyZSkgPT4gdGhpcy5yZXF1ZXN0KCdHRVQnLCBgQ2hlY2svJHtpZH0vJHtjdWx0dXJlfSBgKTtcclxuXHJcbiAgICBjaGVja0RpcnR5ID0gZGF0YSA9PiB0aGlzLnJlcXVlc3QoJ1BPU1QnLCBgQ2hlY2tEaXJ0eWAsIGRhdGEpO1xyXG5cclxuICAgIGdldFNldHRpbmdzID0gKCkgPT4gdGhpcy5yZXF1ZXN0KCdHRVQnLCBgR2V0U2V0dGluZ3NgKTtcclxuXHJcbiAgICBzYXZlU2V0dGluZ3MgPSAoc2V0dGluZ3MsIHRhYnMpID0+IHRoaXMucmVxdWVzdCgnUE9TVCcsIGBTYXZlU2V0dGluZ3NgLCB7XHJcbiAgICAgICAgc2V0dGluZ3MsXHJcbiAgICAgICAgdGFic1xyXG4gICAgfSk7XHJcblxyXG4gICAgZ2V0SGVscFRleHQgPSAoKSA9PiBoZWxwVGV4dDtcclxufSJdfQ=="}